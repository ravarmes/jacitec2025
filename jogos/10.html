<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventos do Litoral - Energia E√≥lica Capixaba</title>
    <style>
        /* ========================================
           ESTILOS GERAIS
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #87CEEB 0%, #4A90E2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }

        /* ========================================
           CABE√áALHO
           ======================================== */
        header {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            max-width: 900px;
            width: 100%;
        }

        h1 {
            color: #2C5F7F;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1em;
            font-weight: 300;
        }

        /* ========================================
           √ÅREA DO JOGO (CANVAS)
           ======================================== */
        #game-area {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            max-width: 900px;
            width: 100%;
            margin-bottom: 20px;
        }

        #game-canvas {
            width: 100%;
            height: 400px;
            border: 3px solid #2C5F7F;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 40%, #4A90B8 40%, #4A90B8 70%, #F4E4C1 70%);
        }

        /* ========================================
           PAINEL DE CONTROLES
           ======================================== */
        #controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        button {
            padding: 12px 25px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .btn-add {
            background: #27ae60;
            color: white;
        }

        .btn-add:hover {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .btn-simulate {
            background: #2980b9;
            color: white;
        }

        .btn-simulate:hover {
            background: #1a5c8a;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(41, 128, 185, 0.4);
        }

        .btn-reset {
            background: #e74c3c;
            color: white;
        }

        .btn-reset:hover {
            background: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        /* ========================================
           PAINEL DE ESTAT√çSTICAS
           ======================================== */
        #stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .stat-card.energy {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .stat-card.impact {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .stat-card.score {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
        }

        /* ========================================
           MODAL DE RESULTADOS
           ======================================== */
        #result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-content h2 {
            color: #2C5F7F;
            margin-bottom: 20px;
            text-align: center;
        }

        .result-info {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #2980b9;
        }

        .result-info p {
            margin: 8px 0;
            line-height: 1.6;
        }

        .tips {
            background: #fffbea;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #f39c12;
            margin-top: 15px;
        }

        .tips h3 {
            color: #f39c12;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .close-btn {
            background: #2C5F7F;
            color: white;
            width: 100%;
            margin-top: 20px;
        }

        .close-btn:hover {
            background: #1a4a6a;
        }

        /* ========================================
           LEGENDA
           ======================================== */
        #legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .legend-icon {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }

        .legend-icon.praia { background: #F4E4C1; }
        .legend-icon.mar { background: #4A90B8; }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }
        
        .placement-mode {
            border: 3px solid #27ae60 !important;
            box-shadow: 0 0 20px rgba(39, 174, 96, 0.6) !important;
        }

        /* ========================================
           RODAP√â EDUCATIVO
           ======================================== */
        footer {
            background: rgba(44, 95, 127, 0.95);
            color: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            line-height: 1.8;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        footer h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        footer p {
            margin: 10px 0;
            font-size: 0.95em;
        }

        /* ========================================
           RESPONSIVIDADE
           ======================================== */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }

            #controls {
                flex-direction: column;
            }

            button {
                width: 100%;
            }

            .stat-value {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <!-- ========================================
         CABE√áALHO
         ======================================== -->
    <header>
        <h1>üåä Ventos do Litoral üåÄ</h1>
        <p class="subtitle">Energia E√≥lica e Sustentabilidade no Litoral Capixaba</p>
    </header>

    <!-- ========================================
         √ÅREA DO JOGO
         ======================================== -->
    <div id="game-area">
        <canvas id="game-canvas"></canvas>

        <!-- Legenda -->
        <div id="legend">
            <div class="legend-item">
                <div class="legend-icon praia">üèñÔ∏è</div>
                <span>Praia (energia m√©dia, impacto baixo)</span>
            </div>
            <div class="legend-item">
                <div class="legend-icon mar">üåä</div>
                <span>Mar (energia alta, risco √† fauna)</span>
            </div>
        </div>

        <!-- Controles -->
        <div id="controls">
            <button class="btn-add" onclick="enablePlacementMode()">‚ûï Adicionar Turbina (Clique no Mapa)</button>
            <button class="btn-simulate" onclick="simulate()">‚ö° Simular 24h</button>
            <button class="btn-reset" onclick="resetGame()">üîÑ Resetar</button>
        </div>

        <!-- Controles de Ambiente -->
        <div id="controls" style="margin-top: 10px;">
            <button class="btn-secondary" onclick="toggleDayNight()" style="background: #f39c12;">üåì Alternar Dia/Noite</button>
            <button class="btn-secondary" onclick="toggleWeather()" style="background: #3498db;">üå¶Ô∏è Mudar Clima</button>
        </div>

        <!-- Estat√≠sticas -->
        <div id="stats">
            <div class="stat-card energy">
                <div class="stat-label">Energia Gerada</div>
                <div class="stat-value" id="energy-stat">0 kWh</div>
            </div>
            <div class="stat-card impact">
                <div class="stat-label">Impacto Ambiental</div>
                <div class="stat-value" id="impact-stat">0%</div>
            </div>
            <div class="stat-card score">
                <div class="stat-label">Pontua√ß√£o</div>
                <div class="stat-value" id="score-stat">0</div>
            </div>
        </div>
    </div>

    <!-- ========================================
         MODAL DE RESULTADO
         ======================================== -->
    <div id="result-modal">
        <div class="modal-content">
            <h2>üìä Relat√≥rio de Simula√ß√£o</h2>
            <div class="result-info" id="result-info"></div>
            <div class="tips" id="tips"></div>
            <button class="close-btn" onclick="closeModal()">Fechar</button>
        </div>
    </div>

    <!-- ========================================
         RODAP√â EDUCATIVO
         ======================================== -->
    <footer>
        <h3>üåø Curiosidades sobre Energia E√≥lica no ES</h3>
        <p>üîπ O Esp√≠rito Santo possui √°reas costeiras com ventos ideais para a gera√ß√£o de energia e√≥lica offshore (no mar), especialmente nas regi√µes de Linhares, Aracruz e Presidente Kennedy.</p>
        <p>üîπ Turbinas instaladas no mar produzem mais energia, mas exigem cuidados ambientais para proteger recifes, aves migrat√≥rias e a vida marinha.</p>
        <p>üîπ A energia e√≥lica √© limpa e renov√°vel, gerada sem emiss√£o de gases de efeito estufa ‚Äî ajudando a reduzir a depend√™ncia de combust√≠veis f√≥sseis.</p>
        <p>üîπ O litoral capixaba abriga ecossistemas sens√≠veis, como os recifes de Guarapari e os manguezais da Ba√≠a de Vit√≥ria, que precisam ser preservados em projetos energ√©ticos.</p>
        <p>üîπ O Brasil √© um dos l√≠deres mundiais em energia e√≥lica, e o Esp√≠rito Santo est√° ampliando estudos e projetos para integrar essa fonte sustent√°vel de forma respons√°vel.</p>
    </footer>

    <script>
        // ========================================
        // VARI√ÅVEIS GLOBAIS DO JOGO
        // ========================================
        
        // Canvas e contexto de desenho
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        
        // Ajusta o tamanho do canvas
        function resizeCanvas() {
            const container = document.getElementById('game-area');
            canvas.width = container.offsetWidth - 40;
            canvas.height = 400;
            drawBackground();
            drawTurbines();
        }
        
        // Lista de turbinas colocadas pelo jogador
        let turbines = [];
        
        // M√©tricas do jogo
        let totalEnergy = 0;
        let totalImpact = 0;
        let score = 0;
        
        // Defini√ß√£o das zonas (regi√µes do canvas)
        const zones = {
            mar: { y: 160, height: 120, energy: 150, impact: 30, name: 'Mar' },
            praia: { y: 280, height: 120, energy: 100, impact: 15, name: 'Praia' }
        };
        
        // ========================================
        // SISTEMA DE DIA/NOITE E CLIMA
        // ========================================
        
        let isNight = false;
        let weather = 'clear'; // 'clear', 'rain', 'cloudy'
        let placementMode = false;
        
        function toggleDayNight() {
            isNight = !isNight;
        }
        
        function toggleWeather() {
            const weathers = ['clear', 'cloudy', 'rain'];
            const currentIndex = weathers.indexOf(weather);
            weather = weathers[(currentIndex + 1) % weathers.length];
        }
        
        // ========================================
        // ANIMAIS (peixes e p√°ssaros)
        // ========================================
        
        let fish = [];
        let birds = [];
        
        // Tipos de peixes com cores diferentes
        const fishTypes = [
            { color: '#FF8C42', accent: '#FF6B35', name: 'Peixe Laranja' },
            { color: '#4ECDC4', accent: '#44A08D', name: 'Peixe Turquesa' },
            { color: '#FFD93D', accent: '#F9B208', name: 'Peixe Amarelo' },
            { color: '#A8E6CF', accent: '#7BC8A4', name: 'Peixe Verde' },
            { color: '#FF6B9D', accent: '#C44569', name: 'Peixe Rosa' }
        ];
        
        // Inicializa peixes no mar
        function initFish() {
            fish = [];
            for (let i = 0; i < 8; i++) {
                const type = fishTypes[Math.floor(Math.random() * fishTypes.length)];
                fish.push({
                    x: Math.random() * canvas.width,
                    y: zones.mar.y + Math.random() * zones.mar.height,
                    speed: 0.3 + Math.random() * 0.8,
                    direction: Math.random() > 0.5 ? 1 : -1,
                    size: 8 + Math.random() * 10,
                    type: type,
                    wobble: Math.random() * Math.PI * 2
                });
            }
        }
        
        // Inicializa p√°ssaros no c√©u
        function initBirds() {
            birds = [];
            for (let i = 0; i < 6; i++) {
                birds.push({
                    x: Math.random() * canvas.width,
                    y: 30 + Math.random() * 100,
                    speed: 0.8 + Math.random() * 1.2,
                    direction: Math.random() > 0.5 ? 1 : -1,
                    wingPhase: Math.random() * Math.PI * 2,
                    type: Math.random() > 0.5 ? 'seagull' : 'hawk',
                    size: 1 + Math.random() * 0.5
                });
            }
        }
        
        // Atualiza posi√ß√£o dos peixes
        function updateFish() {
            fish.forEach(f => {
                f.x += f.speed * f.direction;
                f.wobble += 0.05;
                f.y += Math.sin(f.wobble) * 0.3;
                
                // Volta para o outro lado quando sai da tela
                if (f.x > canvas.width + 30) f.x = -30;
                if (f.x < -30) f.x = canvas.width + 30;
                
                // Mant√©m no mar
                if (f.y < zones.mar.y) f.y = zones.mar.y;
                if (f.y > zones.mar.y + zones.mar.height) f.y = zones.mar.y + zones.mar.height;
            });
        }
        
        // Atualiza posi√ß√£o dos p√°ssaros
        function updateBirds() {
            birds.forEach(b => {
                b.x += b.speed * b.direction;
                b.y += Math.sin(b.x / 50) * 0.2;
                b.wingPhase += 0.15;
                
                // Volta para o outro lado quando sai da tela
                if (b.x > canvas.width + 40) b.x = -40;
                if (b.x < -40) b.x = canvas.width + 40;
            });
        }
        
        // Desenha um peixe
        function drawFish(f) {
            ctx.save();
            ctx.translate(f.x, f.y);
            if (f.direction < 0) ctx.scale(-1, 1);
            
            // Corpo do peixe
            ctx.fillStyle = f.type.color;
            ctx.beginPath();
            ctx.ellipse(0, 0, f.size, f.size * 0.6, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Cauda triangular
            ctx.fillStyle = f.type.accent;
            ctx.beginPath();
            ctx.moveTo(-f.size, 0);
            ctx.lineTo(-f.size - 8, -6);
            ctx.lineTo(-f.size - 8, 6);
            ctx.closePath();
            ctx.fill();
            
            // Barbatana dorsal
            ctx.fillStyle = f.type.accent;
            ctx.beginPath();
            ctx.moveTo(0, -f.size * 0.6);
            ctx.lineTo(2, -f.size * 0.6 - 5);
            ctx.lineTo(4, -f.size * 0.6);
            ctx.closePath();
            ctx.fill();
            
            // Olho
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(f.size * 0.5, -2, 3, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(f.size * 0.5, -2, 1.5, 0, Math.PI * 2);
            ctx.fill();
            
            // Detalhes (escamas)
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                ctx.arc(-f.size * 0.3 + i * 3, 0, 2, 0, Math.PI * 2);
                ctx.stroke();
            }
            
            ctx.restore();
        }
        
        // Desenha um p√°ssaro
        function drawBird(b) {
            ctx.save();
            ctx.translate(b.x, b.y);
            ctx.scale(b.size, b.size);
            if (b.direction < 0) ctx.scale(-1, 1);
            
            const wingAngle = Math.sin(b.wingPhase) * 0.6;
            
            if (b.type === 'seagull') {
                // Gaivota (branca com detalhes cinza)
                // Corpo
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.ellipse(0, 0, 10, 6, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Cabe√ßa
                ctx.beginPath();
                ctx.arc(8, -2, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Bico amarelo
                ctx.fillStyle = '#FFA500';
                ctx.beginPath();
                ctx.moveTo(11, -2);
                ctx.lineTo(15, -1);
                ctx.lineTo(11, 0);
                ctx.closePath();
                ctx.fill();
                
                // Asa esquerda
                ctx.fillStyle = 'white';
                ctx.strokeStyle = '#95a5a6';
                ctx.lineWidth = 1.5;
                ctx.beginPath();
                ctx.moveTo(-5, 0);
                ctx.quadraticCurveTo(-15, -10 + wingAngle * 15, -18, -12 + wingAngle * 20);
                ctx.stroke();
                
                // Asa direita
                ctx.beginPath();
                ctx.moveTo(5, 0);
                ctx.quadraticCurveTo(15, -10 + wingAngle * 15, 18, -12 + wingAngle * 20);
                ctx.stroke();
                
                // Olho
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(10, -3, 1.5, 0, Math.PI * 2);
                ctx.fill();
                
            } else {
                // Falc√£o/√Åguia (marrom)
                // Corpo
                ctx.fillStyle = '#8B4513';
                ctx.beginPath();
                ctx.ellipse(0, 0, 9, 5, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Cabe√ßa
                ctx.fillStyle = '#A0522D';
                ctx.beginPath();
                ctx.arc(7, -1, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // Bico curvo
                ctx.fillStyle = '#FFD700';
                ctx.beginPath();
                ctx.moveTo(10, -1);
                ctx.quadraticCurveTo(13, -1, 13, 1);
                ctx.lineTo(10, 1);
                ctx.closePath();
                ctx.fill();
                
                // Asas mais largas
                ctx.strokeStyle = '#654321';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(-4, 0);
                ctx.quadraticCurveTo(-14, -8 + wingAngle * 12, -16, -10 + wingAngle * 18);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(4, 0);
                ctx.quadraticCurveTo(14, -8 + wingAngle * 12, 16, -10 + wingAngle * 18);
                ctx.stroke();
                
                // Olho de rapina
                ctx.fillStyle = 'yellow';
                ctx.beginPath();
                ctx.arc(9, -2, 1.5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(9, -2, 0.8, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.restore();
        }
        
        // ========================================
        // INICIALIZA√á√ÉO
        // ========================================
        
        window.addEventListener('load', () => {
            resizeCanvas();
            initFish();
            initBirds();
            window.addEventListener('resize', resizeCanvas);
        });
        
        // ========================================
        // FUN√á√ÉO: DESENHAR FUNDO (C√©u, Mar, Praia)
        // ========================================
        
        function drawBackground() {
            // Cores baseadas no per√≠odo (dia/noite)
            let skyColor1, skyColor2, seaColor1, seaColor2, sandColor, sunMoonColor;
            
            if (isNight) {
                skyColor1 = '#191970'; // Azul meia-noite
                skyColor2 = '#000033';
                seaColor1 = '#1a3a52';
                seaColor2 = '#0d1f2d';
                sandColor = '#8B7355';
                sunMoonColor = '#F0E68C'; // Lua amarela p√°lida
            } else {
                skyColor1 = '#87CEEB';
                skyColor2 = '#B0D8E8';
                seaColor1 = '#4A90B8';
                seaColor2 = '#2C5F7F';
                sandColor = '#F4E4C1';
                sunMoonColor = '#FFD700'; // Sol dourado
            }
            
            // C√©u com gradiente
            const skyGrad = ctx.createLinearGradient(0, 0, 0, zones.mar.y);
            skyGrad.addColorStop(0, skyColor1);
            skyGrad.addColorStop(1, skyColor2);
            ctx.fillStyle = skyGrad;
            ctx.fillRect(0, 0, canvas.width, zones.mar.y);
            
            // Estrelas √† noite
            if (isNight) {
                ctx.fillStyle = 'white';
                for (let i = 0; i < 50; i++) {
                    const x = (i * 73) % canvas.width;
                    const y = (i * 37) % zones.mar.y;
                    const size = (i % 3) + 1;
                    ctx.beginPath();
                    ctx.arc(x, y, size * 0.5, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Sol/Lua
            ctx.fillStyle = sunMoonColor;
            ctx.beginPath();
            ctx.arc(canvas.width - 60, 40, isNight ? 25 : 35, 0, Math.PI * 2);
            ctx.fill();
            
            // Cratera da lua
            if (isNight) {
                ctx.fillStyle = 'rgba(169, 169, 169, 0.3)';
                ctx.beginPath();
                ctx.arc(canvas.width - 65, 35, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.beginPath();
                ctx.arc(canvas.width - 55, 42, 4, 0, Math.PI * 2);
                ctx.fill();
            } else {
                // Raios do sol
                ctx.strokeStyle = 'rgba(255, 215, 0, 0.5)';
                ctx.lineWidth = 3;
                for (let i = 0; i < 12; i++) {
                    const angle = (i / 12) * Math.PI * 2;
                    ctx.beginPath();
                    ctx.moveTo((canvas.width - 60) + Math.cos(angle) * 40, 40 + Math.sin(angle) * 40);
                    ctx.lineTo((canvas.width - 60) + Math.cos(angle) * 55, 40 + Math.sin(angle) * 55);
                    ctx.stroke();
                }
            }
            
            // Nuvens (se clima nublado ou chuva)
            if (weather === 'cloudy' || weather === 'rain') {
                drawCloud(100, 50);
                drawCloud(300, 70);
                drawCloud(500, 40);
                drawCloud(650, 60);
            } else if (!isNight) {
                // Poucas nuvens no dia claro
                drawCloud(150, 60);
                drawCloud(450, 50);
            }
            
            // Chuva
            if (weather === 'rain') {
                ctx.strokeStyle = 'rgba(173, 216, 230, 0.5)';
                ctx.lineWidth = 2;
                for (let i = 0; i < 100; i++) {
                    const x = (i * 17 + Date.now() / 10) % canvas.width;
                    const y = (i * 23) % zones.mar.y;
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                    ctx.lineTo(x - 3, y + 10);
                    ctx.stroke();
                }
            }
            
            // Mar com gradiente
            const seaGrad = ctx.createLinearGradient(0, zones.mar.y, 0, zones.praia.y);
            seaGrad.addColorStop(0, seaColor1);
            seaGrad.addColorStop(1, seaColor2);
            ctx.fillStyle = seaGrad;
            ctx.fillRect(0, zones.mar.y, canvas.width, zones.mar.height);
            
            // Ondas decorativas
            ctx.strokeStyle = isNight ? 'rgba(255, 255, 255, 0.15)' : 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                for (let x = 0; x < canvas.width; x += 20) {
                    const y = zones.mar.y + 20 + i * 40 + Math.sin(x / 30 + Date.now() / 1000) * 8;
                    ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
            
            // Praia
            ctx.fillStyle = sandColor;
            ctx.fillRect(0, zones.praia.y, canvas.width, zones.praia.height);
            
            // Linhas de divis√£o
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 5]);
            ctx.beginPath();
            ctx.moveTo(0, zones.mar.y);
            ctx.lineTo(canvas.width, zones.mar.y);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(0, zones.praia.y);
            ctx.lineTo(canvas.width, zones.praia.y);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        // Fun√ß√£o auxiliar para desenhar nuvens
        function drawCloud(x, y) {
            ctx.fillStyle = isNight ? 'rgba(200, 200, 200, 0.4)' : 'rgba(255, 255, 255, 0.7)';
            ctx.beginPath();
            ctx.arc(x, y, 20, 0, Math.PI * 2);
            ctx.arc(x + 25, y, 25, 0, Math.PI * 2);
            ctx.arc(x + 50, y, 20, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // ========================================
        // FUN√á√ÉO: DESENHAR TURBINA
        // ========================================
        
        function drawTurbine(x, y, zone) {
            // Torre da turbina
            ctx.fillStyle = '#7f8c8d';
            ctx.fillRect(x - 3, y - 40, 6, 40);
            
            // Base
            ctx.fillStyle = '#5a6568';
            ctx.fillRect(x - 8, y, 16, 5);
            
            // Hub central
            ctx.fillStyle = '#2C5F7F';
            ctx.beginPath();
            ctx.arc(x, y - 40, 8, 0, Math.PI * 2);
            ctx.fill();
            
            // P√°s da turbina (3 p√°s)
            const rotation = Date.now() / 500; // Rota√ß√£o animada
            for (let i = 0; i < 3; i++) {
                const angle = rotation + (i * Math.PI * 2 / 3);
                ctx.save();
                ctx.translate(x, y - 40);
                ctx.rotate(angle);
                
                // Desenha a p√°
                ctx.fillStyle = '#ecf0f1';
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(-4, -25);
                ctx.lineTo(4, -25);
                ctx.closePath();
                ctx.fill();
                
                ctx.strokeStyle = '#95a5a6';
                ctx.lineWidth = 1;
                ctx.stroke();
                
                ctx.restore();
            }
            
            // Indicador de zona (cor da borda)
            let color = '#27ae60'; // verde por padr√£o
            if (zone === 'mar') color = '#e74c3c'; // vermelho para mar
            if (zone === 'praia') color = '#f39c12'; // laranja para praia
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(x, y - 40, 12, 0, Math.PI * 2);
            ctx.stroke();
        }
        
        // ========================================
        // FUN√á√ÉO: DESENHAR TODAS AS TURBINAS
        // ========================================
        
        function drawTurbines() {
            turbines.forEach(turbine => {
                drawTurbine(turbine.x, turbine.y, turbine.zone);
            });
        }
        
        // ========================================
        // FUN√á√ÉO: ADICIONAR TURBINA (modo de clique)
        // ========================================
        
        function enablePlacementMode() {
            placementMode = true;
            canvas.classList.add('placement-mode');
            alert('‚úÖ Modo de posicionamento ativado! Clique no MAR ou na PRAIA para adicionar uma turbina.');
        }
        
        // Event listener para clicar no canvas
        canvas.addEventListener('click', function(e) {
            if (!placementMode) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Verifica se est√° na zona permitida (mar ou praia)
            let zone = null;
            
            if (y >= zones.mar.y && y < zones.praia.y) {
                zone = 'mar';
            } else if (y >= zones.praia.y && y < canvas.height) {
                zone = 'praia';
            }
            
            if (zone) {
                // Adiciona a turbina
                turbines.push({ x, y, zone });
                calculateMetrics();
                placementMode = false;
                canvas.classList.remove('placement-mode');
            } else {
                alert('‚ö†Ô∏è Escolha uma posi√ß√£o no MAR ou na PRAIA!');
            }
        });
        
        // ========================================
        // FUN√á√ÉO: CALCULAR M√âTRICAS
        // ========================================
        
        function calculateMetrics() {
            totalEnergy = 0;
            totalImpact = 0;
            
            // Calcula com base nas turbinas
            turbines.forEach(turbine => {
                const zoneData = zones[turbine.zone];
                totalEnergy += zoneData.energy;
                totalImpact += zoneData.impact;
            });
            
            // Pontua√ß√£o = Energia - (Impacto * 2)
            score = Math.max(0, totalEnergy - (totalImpact * 2));
            
            // Atualiza interface
            updateStats();
        }
        
        // ========================================
        // FUN√á√ÉO: ATUALIZAR ESTAT√çSTICAS NA TELA
        // ========================================
        
        function updateStats() {
            document.getElementById('energy-stat').textContent = totalEnergy + ' kWh';
            document.getElementById('impact-stat').textContent = Math.min(100, totalImpact) + '%';
            document.getElementById('score-stat').textContent = score;
        }
        
        // ========================================
        // FUN√á√ÉO: SIMULAR 24H (mostrar resultado)
        // ========================================
        
        function simulate() {
            if (turbines.length === 0) {
                alert('‚ö†Ô∏è Adicione pelo menos uma turbina antes de simular!');
                return;
            }
            
            // Conta turbinas por zona
            const count = { mar: 0, praia: 0 };
            turbines.forEach(t => count[t.zone]++);
            
            // Gera o relat√≥rio
            const resultInfo = document.getElementById('result-info');
            resultInfo.innerHTML = `
                <p><strong>‚ö° Energia Total Gerada:</strong> ${totalEnergy} kWh/dia</p>
                <p><strong>üåç Impacto Ambiental:</strong> ${Math.min(100, totalImpact)}%</p>
                <p><strong>üèÜ Pontua√ß√£o Final:</strong> ${score} pontos</p>
                <hr style="margin: 10px 0; border: none; border-top: 1px solid #ddd;">
                <p><strong>üìç Distribui√ß√£o:</strong></p>
                <p>‚Ä¢ Mar: ${count.mar} turbina(s)</p>
                <p>‚Ä¢ Praia: ${count.praia} turbina(s)</p>
            `;
            
            // Gera dicas
            const tips = document.getElementById('tips');
            let tipText = '<h3>üí° Dicas de Sustentabilidade:</h3>';
            
            if (count.mar > 3) {
                tipText += '<p>‚ö†Ô∏è Muitas turbinas no mar! Reduza para proteger os recifes de Guarapari e a vida marinha.</p>';
            }
            if (count.praia > 5) {
                tipText += '<p>‚ö†Ô∏è Impacto visual alto na praia. Considere distribuir melhor as turbinas.</p>';
            }
            if (totalImpact > 50) {
                tipText += '<p>‚ö†Ô∏è Impacto ambiental elevado! Tente equilibrar energia e sustentabilidade.</p>';
            }
            if (score > 300) {
                tipText += '<p>‚úÖ Excelente! Voc√™ encontrou um bom equil√≠brio sustent√°vel!</p>';
            }
            if (count.praia > count.mar && score > 200) {
                tipText += '<p>‚úÖ Boa estrat√©gia! Priorizar a praia pode ser um bom equil√≠brio entre energia e impacto.</p>';
            }
            if (count.mar === 0) {
                tipText += '<p>üí° Turbinas no mar geram mais energia, mas lembre-se do impacto ambiental!</p>';
            }
            
            tips.innerHTML = tipText;
            
            // Mostra o modal
            document.getElementById('result-modal').style.display = 'flex';
        }
        
        // ========================================
        // FUN√á√ÉO: FECHAR MODAL
        // ========================================
        
        function closeModal() {
            document.getElementById('result-modal').style.display = 'none';
        }
        
        // ========================================
        // FUN√á√ÉO: RESETAR JOGO
        // ========================================
        
        function resetGame() {
            turbines = [];
            totalEnergy = 0;
            totalImpact = 0;
            score = 0;
            initFish();
            initBirds();
            updateStats();
        }
        
        // ========================================
        // ANIMA√á√ÉO (redesenha a cada frame)
        // ========================================
        
        function animate() {
            drawBackground();
            
            // Desenha e atualiza animais
            updateFish();
            updateBirds();
            
            fish.forEach(f => drawFish(f));
            birds.forEach(b => drawBird(b));
            
            drawTurbines();
            requestAnimationFrame(animate);
        }
        
        // Inicia a anima√ß√£o
        animate();
        
        // ========================================
        // LOG NO CONSOLE
        // ========================================
        
        console.log('üåä Jogo "Ventos do Litoral" carregado com sucesso!');
        console.log('üéÆ Desenvolvido para ensinar sobre energia e√≥lica e sustentabilidade.');
        console.log('üìö Ajuste as vari√°veis em "zones" para modificar energia e impacto.');
    </script>
</body>
</html>