<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Mistério da Restinga - Defesa Civil ES</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Inter:wght@400;500;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background: #2d2d2a;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.05) 2px, rgba(0,0,0,.05) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,.05) 2px, rgba(0,0,0,.05) 4px);
            min-height: 100vh;
            color: #e8dcc4;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .screen {
            display: none;
            animation: fadeIn 0.8s ease-in;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Personagem Defesa Civil */
        .character-container {
            display: flex;
            align-items: flex-end;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .character {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, #5a4a3a, #3d3228);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.6), inset 0 0 20px rgba(0,0,0,0.3);
            border: 3px solid #8b7355;
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
        }

        .character::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1), transparent);
        }

        .character-silhouette {
            width: 70%;
            height: 70%;
            background: #2d2d2a;
            clip-path: polygon(50% 0%, 60% 20%, 80% 20%, 70% 40%, 90% 60%, 70% 60%, 60% 80%, 50% 70%, 40% 80%, 30% 60%, 10% 60%, 30% 40%, 20% 20%, 40% 20%);
            opacity: 0.8;
        }

        .speech-bubble {
            position: relative;
            background: linear-gradient(135deg, #3d3d38, #2d2d2a);
            border-radius: 15px;
            padding: 25px;
            max-width: 700px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.1);
            cursor: pointer;
            transition: transform 0.2s;
            flex: 1;
            min-width: 280px;
            border: 2px solid #5a4a3a;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(0,0,0,.03) 20px, rgba(0,0,0,.03) 21px);
        }

        .speech-bubble:hover {
            transform: scale(1.02);
            border-color: #8b7355;
        }

        .speech-bubble::before {
            content: '';
            position: absolute;
            bottom: 20px;
            left: -15px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 15px 15px 15px 0;
            border-color: transparent #2d2d2a transparent transparent;
        }

        .speech-bubble-text {
            color: #e8dcc4;
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 10px;
            font-family: 'Crimson Text', serif;
        }

        .speech-bubble-prompt {
            text-align: right;
            color: #a89674;
            font-size: 0.9em;
            font-style: italic;
            margin-top: 15px;
        }

        .speech-bubble-prompt::before {
            content: '→ ';
        }

        .logo-defesa-civil {
            background: linear-gradient(135deg, #5a3a2a, #3d2818);
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            border: 2px solid #8b7355;
        }

        .logo-text {
            color: #d4af37;
            font-weight: bold;
            font-size: 1.2em;
            font-family: 'Crimson Text', serif;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        /* Tela de Introdução */
        .intro-screen {
            background: linear-gradient(to bottom, #2a2318 0%, #1a1510 100%);
            border-radius: 15px;
            padding: 40px;
            color: #e8dcc4;
            box-shadow: 0 20px 60px rgba(0,0,0,0.7);
            border: 3px solid #4a3a2a;
            position: relative;
            overflow: hidden;
        }

        .intro-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(0,0,0,.08) 1px, rgba(0,0,0,.08) 2px),
                repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(0,0,0,.08) 1px, rgba(0,0,0,.08) 2px);
            opacity: 0.3;
            pointer-events: none;
        }

        .newspaper-header {
            background: linear-gradient(135deg, #3d2d1d, #2d1d0d);
            padding: 30px 20px;
            margin: -40px -40px 30px -40px;
            border-bottom: 4px double #8b7355;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            position: relative;
        }

        .newspaper-title {
            font-size: 2.8em;
            text-align: center;
            margin-bottom: 5px;
            color: #1a1510;
            font-family: 'Crimson Text', serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #d4af37, #f4d77f);
            padding: 15px;
            border: 3px solid #8b7355;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
            line-height: 1.1;
        }

        .newspaper-subtitle {
            font-size: 1.3em;
            text-align: center;
            color: #d4af37;
            margin-top: 10px;
            font-family: 'Crimson Text', serif;
            font-style: italic;
            text-transform: uppercase;
            letter-spacing: 3px;
            border-top: 1px solid #5a4a3a;
            border-bottom: 1px solid #5a4a3a;
            padding: 8px;
        }

        .title {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 10px;
            color: #d4af37;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
            font-family: 'Crimson Text', serif;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2em;
            text-align: center;
            color: #a89674;
            margin-bottom: 30px;
            font-family: 'Crimson Text', serif;
            font-style: italic;
        }

        .agent-photo-container {
            display: flex;
            gap: 25px;
            align-items: flex-start;
            margin-bottom: 30px;
            position: relative;
        }

        .agent-photo {
            width: 200px;
            height: 280px;
            background: linear-gradient(135deg, #5a4a3a, #3d3228);
            border: 4px solid #8b7355;
            box-shadow: 0 8px 25px rgba(0,0,0,0.6), inset 0 0 30px rgba(0,0,0,0.3);
            position: relative;
            flex-shrink: 0;
            overflow: hidden;
        }

        .agent-photo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.3) 100%),
                radial-gradient(ellipse at 50% 30%, rgba(212,175,55,0.2), transparent);
        }

        .agent-silhouette {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 220px;
            background: linear-gradient(180deg, #2d2d2a 0%, #1a1a18 100%);
            clip-path: polygon(
                50% 0%, 45% 5%, 42% 10%, 38% 15%, 35% 20%, 
                30% 25%, 28% 35%, 25% 45%, 20% 55%, 18% 70%,
                15% 85%, 10% 95%, 10% 100%, 90% 100%, 90% 95%,
                85% 85%, 82% 70%, 80% 55%, 75% 45%, 72% 35%,
                70% 25%, 65% 20%, 62% 15%, 58% 10%, 55% 5%
            );
            opacity: 0.9;
        }

        .agent-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, #d4af37, #8b7355);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            color: #1a1510;
            font-weight: bold;
            border: 2px solid #5a4a3a;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .classic-speech-bubble {
            flex: 1;
            position: relative;
            background: linear-gradient(135deg, #e8dcc4, #d4c8a8);
            border: 3px solid #5a4a3a;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            min-width: 300px;
        }

        .classic-speech-bubble::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 50px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 20px 25px 20px 0;
            border-color: transparent #5a4a3a transparent transparent;
        }

        .classic-speech-bubble::after {
            content: '';
            position: absolute;
            left: -19px;
            top: 52px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 18px 22px 18px 0;
            border-color: transparent #e8dcc4 transparent transparent;
        }

        .speech-text {
            color: #1a1510;
            font-size: 1.15em;
            line-height: 1.7;
            font-family: 'Crimson Text', serif;
            font-weight: 600;
            text-align: left;
        }

        .investigation-desk {
            background: linear-gradient(135deg, #2d1d0d, #1a1008);
            padding: 30px;
            border-radius: 12px;
            border: 3px solid #4a3a2a;
            box-shadow: inset 0 2px 15px rgba(0,0,0,0.5);
            position: relative;
            margin-top: 30px;
        }

        .desk-items {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .desk-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #a89674;
            font-family: 'Crimson Text', serif;
            font-size: 0.95em;
        }

        .desk-icon {
            width: 35px;
            height: 35px;
            background: radial-gradient(circle, #5a4a3a, #3d3228);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #8b7355;
            font-size: 1.2em;
        }

        .newspaper-clippings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .newspaper-clip {
            background: linear-gradient(135deg, #d4c8a8, #c4b898);
            padding: 15px;
            border: 2px solid #5a4a3a;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transform: rotate(-1deg);
            position: relative;
            transition: transform 0.3s;
        }

        .newspaper-clip:nth-child(2) {
            transform: rotate(1deg);
        }

        .newspaper-clip:nth-child(3) {
            transform: rotate(-0.5deg);
        }

        .newspaper-clip:nth-child(4) {
            transform: rotate(0.8deg);
        }

        .newspaper-clip:hover {
            transform: rotate(0deg) scale(1.05);
            z-index: 10;
        }

        .newspaper-clip::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 15px, rgba(0,0,0,.05) 15px, rgba(0,0,0,.05) 16px);
            pointer-events: none;
        }

        .clip-headline {
            font-family: 'Crimson Text', serif;
            font-weight: 700;
            font-size: 1.1em;
            color: #1a1510;
            margin-bottom: 8px;
            text-transform: uppercase;
            line-height: 1.3;
            border-bottom: 2px solid #5a4a3a;
            padding-bottom: 5px;
        }

        .clip-date {
            font-size: 0.85em;
            color: #5a4a3a;
            font-style: italic;
            margin-bottom: 8px;
        }

        .clip-excerpt {
            font-size: 0.9em;
            color: #2d2d2a;
            line-height: 1.5;
            font-family: 'Crimson Text', serif;
        }

        .disaster-visual {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .disaster-icon-box {
            background: linear-gradient(135deg, #5a2a2a, #3d1818);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            border: 2px solid #6d3838;
            animation: flicker 3s infinite;
            position: relative;
            overflow: hidden;
        }

        .disaster-icon-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        .disaster-icon-symbol {
            font-size: 2.5em;
            color: #d4af37;
            margin-bottom: 10px;
            font-family: 'Crimson Text', serif;
        }

        .btn {
            background: linear-gradient(135deg, #5a4a3a, #3d3228);
            color: #e8dcc4;
            border: 2px solid #8b7355;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: all 0.3s;
            font-family: 'Crimson Text', serif;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.7);
            border-color: #d4af37;
            background: linear-gradient(135deg, #6a5a4a, #4d4238);
        }

        /* Tela de Jogo */
        .game-screen {
            background: linear-gradient(to bottom, #2d2d2a 0%, #3d3d38 100%);
            border-radius: 15px;
            padding: 30px;
            min-height: 80vh;
            border: 3px solid #5a4a3a;
        }

        .scene {
            position: relative;
            background: linear-gradient(to bottom, #3a4a4a 0%, #2d3d3d 30%, #1a2a2a 60%, #4a4838 60%, #3d3d2a 100%);
            height: 400px;
            border-radius: 12px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.7), 0 10px 30px rgba(0,0,0,0.5);
            border: 3px solid #5a4a3a;
        }

        .scene::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(139,115,85,0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(90,74,58,0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .sun {
            position: absolute;
            top: 40px;
            right: 60px;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #d4af37, #8b7355);
            border-radius: 50%;
            box-shadow: 0 0 40px rgba(212,175,55,0.3);
            opacity: 0.6;
        }

        .wave {
            position: absolute;
            bottom: 45%;
            width: 100%;
            height: 30px;
            background: rgba(139,115,85,0.2);
            border-radius: 50%;
            animation: wave 3s infinite ease-in-out;
        }

        @keyframes wave {
            0%, 100% { transform: translateX(0) scaleY(1); }
            50% { transform: translateX(20px) scaleY(1.2); }
        }

        .clue-spot {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s;
            animation: flicker 2s infinite;
        }

        .clue-spot:hover {
            transform: scale(1.2);
            filter: brightness(1.3);
        }

        .clue-spot.collected {
            opacity: 0.3;
            pointer-events: none;
            animation: none;
        }

        .clue-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            background: radial-gradient(circle, rgba(212,175,55,0.3), rgba(139,115,85,0.5));
            box-shadow: 0 4px 15px rgba(0,0,0,0.5), inset 0 0 20px rgba(212,175,55,0.2);
            border: 2px solid #8b7355;
            color: #e8dcc4;
            font-family: 'Crimson Text', serif;
            font-weight: bold;
        }

        .clue1 { top: 15%; left: 20%; }
        .clue2 { top: 60%; left: 15%; }
        .clue3 { top: 55%; right: 20%; }
        .clue4 { top: 20%; right: 15%; }

        .progress-container {
            background: linear-gradient(135deg, #3d3d38, #2d2d2a);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #5a4a3a;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .progress-text {
            font-size: 1.2em;
            color: #d4af37;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Crimson Text', serif;
        }

        .progress-circles {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .progress-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #2d2d2a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            transition: all 0.5s;
            border: 2px solid #5a4a3a;
            color: #8b7355;
            font-family: 'Crimson Text', serif;
        }

        .progress-circle.found {
            background: linear-gradient(135deg, #5a4a3a, #3d3228);
            color: #d4af37;
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(212,175,55,0.5);
            border-color: #d4af37;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(to bottom, #2d2d2a, #1a1a18);
            border-radius: 15px;
            max-width: 700px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.8);
            animation: fadeIn 0.3s;
            border: 3px solid #5a4a3a;
        }

        .modal-header {
            background: linear-gradient(135deg, #5a3a2a, #3d2818);
            padding: 25px;
            border-radius: 12px 12px 0 0;
            color: #e8dcc4;
            border-bottom: 2px solid #8b7355;
        }

        .modal-agent {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .modal-agent-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #3d3228, #2d2d2a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: #d4af37;
            border: 2px solid #8b7355;
            font-family: 'Crimson Text', serif;
            font-weight: bold;
        }

        .modal-agent-title {
            font-size: 1.3em;
            font-weight: bold;
            font-family: 'Crimson Text', serif;
            color: #d4af37;
        }

        .modal-body {
            padding: 30px;
        }

        .clue-dialogue {
            background: linear-gradient(135deg, #3d3d38, #2d2d2a);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border-left: 4px solid #8b7355;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #5a4a3a;
        }

        .clue-dialogue:hover {
            background: linear-gradient(135deg, #4d4d48, #3d3d38);
            transform: translateX(5px);
            border-left-color: #d4af37;
        }

        .clue-dialogue-text {
            color: #e8dcc4;
            line-height: 1.8;
            font-size: 1.05em;
            font-family: 'Crimson Text', serif;
        }

        .clue-dialogue-next {
            text-align: right;
            color: #a89674;
            font-size: 0.9em;
            margin-top: 10px;
            font-style: italic;
        }

        .evidence-box {
            background: linear-gradient(135deg, #5a4a3a, #3d3228);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #8b7355;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
        }

        .evidence-title {
            font-weight: bold;
            color: #d4af37;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-family: 'Crimson Text', serif;
        }

        /* Photo Album para Pista 1 */
        .photo-album {
            background: linear-gradient(135deg, #2d2d2a, #1a1a18);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border: 3px solid #5a4a3a;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
        }

        .photo-album-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.3em;
            color: #d4af37;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .photo-container {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px;
        }

        .photo-item {
            flex-shrink: 0;
            width: 280px;
            background: #3d3d38;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #5a4a3a;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .photo-image {
            width: 100%;
            height: 180px;
            background-size: cover;
            background-position: center;
        }

        .photo-caption {
            padding: 12px;
            color: #e8dcc4;
            font-size: 0.95em;
            text-align: center;
            background: linear-gradient(to bottom, #2d2d2a, #1a1a18);
            font-family: 'Crimson Text', serif;
            font-style: italic;
        }

        .close-modal-btn {
            background: linear-gradient(135deg, #5a4a3a, #3d3228);
            color: #e8dcc4;
            border: 2px solid #8b7355;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            font-size: 1.1em;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: all 0.3s;
            font-family: 'Crimson Text', serif;
            font-weight: 600;
        }

        .close-modal-btn:hover {
            transform: translateY(-2px);
            border-color: #d4af37;
            background: linear-gradient(135deg, #6a5a4a, #4d4238);
        }

        /* Tela de Conclusão */
        .conclusion-screen {
            background: linear-gradient(135deg, #3d3d2a 0%, #2d2d1a 100%);
            border-radius: 15px;
            padding: 40px;
            color: #e8dcc4;
            border: 3px solid #5a4a3a;
        }

        .celebration {
            text-align: center;
            font-size: 4em;
            margin-bottom: 20px;
            color: #d4af37;
            text-shadow: 0 0 20px rgba(212,175,55,0.5);
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .lesson-card {
            background: linear-gradient(135deg, #3d3d38, #2d2d2a);
            color: #e8dcc4;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            transition: transform 0.3s;
            border: 2px solid #5a4a3a;
        }

        .lesson-card:hover {
            transform: translateY(-10px);
            border-color: #8b7355;
        }

        .lesson-icon {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 15px;
            color: #d4af37;
        }

        .lesson-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #d4af37;
            margin-bottom: 10px;
            text-align: center;
            font-family: 'Crimson Text', serif;
        }

        .lesson-text {
            line-height: 1.6;
            text-align: center;
            font-family: 'Crimson Text', serif;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .title { font-size: 1.8em; }
            .character { width: 100px; height: 100px; }
            .speech-bubble { padding: 20px; }
            .scene { height: 300px; }
            .clue-icon { width: 60px; height: 60px; font-size: 1.8em; }
            .character-container { justify-content: center; }
            .photo-container { flex-direction: column; }
            .photo-item { width: 100%; }
        }

        @media (max-width: 480px) {
            .title { font-size: 1.5em; }
            .game-container { padding: 10px; }
            .intro-screen, .game-screen, .conclusion-screen { padding: 20px; }
            .character { width: 80px; height: 80px; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div id="intro" class="screen active intro-screen">
            <div class="logo-defesa-civil">
                <div class="logo-text">JORNAL DO LITORAL CAPIXABA</div>
            </div>
            <h1 class="title">O Mistério da Restinga</h1>
            <h2 class="subtitle">Litoral Sul Capixaba em Alerta</h2>
            <div class="character-container">
                <div class="character">
                    <div class="character-silhouette"></div>
                </div>
                <div class="speech-bubble" onclick="nextIntroDialogue()">
                    <p class="speech-bubble-text" id="introText"></p>
                    <p class="speech-bubble-prompt">Clique para continuar</p>
                </div>
            </div>
            <div class="disaster-visual" id="disasterIcons" style="display: none;">
                <div class="disaster-icon-box">
                    <div class="disaster-icon-symbol">≋</div>
                    <div style="color: #a89674; font-family: 'Crimson Text', serif;">Erosão Acelerada</div>
                </div>
                <div class="disaster-icon-box">
                    <div class="disaster-icon-symbol">⌂</div>
                    <div style="color: #a89674; font-family: 'Crimson Text', serif;">Casas Ameaçadas</div>
                </div>
                <div class="disaster-icon-box">
                    <div class="disaster-icon-symbol">∿</div>
                    <div style="color: #a89674; font-family: 'Crimson Text', serif;">Dunas Móveis</div>
                </div>
                <div class="disaster-icon-box">
                    <div class="disaster-icon-symbol">⚘</div>
                    <div style="color: #a89674; font-family: 'Crimson Text', serif;">Fauna Desaparecendo</div>
                </div>
            </div>
            <button class="btn" id="startBtn" onclick="startGame()" style="display: none;">
                Iniciar Investigação
            </button>
        </div>
        <div id="game" class="screen game-screen">
            <div class="logo-defesa-civil">
                <div class="logo-text"> DEFESA CIVIL ES - EM CAMPO </div>
            </div>
            <div class="progress-container">
                <div class="progress-text">Pistas Coletadas</div>
                <div class="progress-circles">
                    <div class="progress-circle" id="circle1">I</div>
                    <div class="progress-circle" id="circle2">II</div>
                    <div class="progress-circle" id="circle3">III</div>
                    <div class="progress-circle" id="circle4">IV</div>
                </div>
            </div>
            <div class="character-container">
                <div class="character">
                    <div class="character-silhouette"></div>
                </div>
                <div class="speech-bubble" onclick="nextGameDialogue()">
                    <p class="speech-bubble-text" id="gameText"></p>
                    <p class="speech-bubble-prompt">Clique para continuar</p>
                </div>
            </div>
            <div class="scene">
                <div class="sun"></div>
                <div class="wave"></div>                                
                <div class="clue-spot clue1" onclick="investigateClue(1)" id="clue1">
                    <div class="clue-icon">◈</div>
                </div>
                <div class="clue-spot clue2" onclick="investigateClue(2)" id="clue2">
                    <div class="clue-icon">❦</div>
                </div>
                <div class="clue-spot clue3" onclick="investigateClue(3)" id="clue3">
                    <div class="clue-icon">◐</div>
                </div>
                <div class="clue-spot clue4" onclick="investigateClue(4)" id="clue4">
                    <div class="clue-icon">◎</div>
                </div>
            </div>
            <button class="btn" id="solveBtn" onclick="showConclusion()" style="display: none;">
                Revelar a Solução
            </button>
        </div>
        <div id="conclusion" class="screen conclusion-screen">
            <div class="logo-defesa-civil">
                <div class="logo-text">DEFEA CIVIL ES - CASO RESOLVIDO</div>
            </div>
            <div class="celebration">✦ ✧ ✦</div>
            <h1 class="title" style="color: #d4af37;">Mistério Solucionado</h1>
            <div class="character-container" style="margin-top: 30px;">
                <div class="character">
                    <div class="character-silhouette"></div>
                </div>
                <div class="speech-bubble" onclick="nextConclusionDialogue()">
                    <p class="speech-bubble-text" id="conclusionText"></p>
                    <p class="speech-bubble-prompt">Clique para continuar</p>
                </div>
            </div>
            <div class="lesson-grid" id="lessonGrid" style="display: none;">
                <div class="lesson-card">
                    <div class="lesson-icon">⚓</div>
                    <div class="lesson-title">Fixação de Dunas</div>
                    <p class="lesson-text">Raízes profundas seguram a areia, impedindo invasão de ruas e casas.</p>
                </div>
                <div class="lesson-card">
                    <div class="lesson-icon">◈</div>
                    <div class="lesson-title">Proteção Costeira</div>
                    <p class="lesson-text">Barreira natural contra ressacas e avanço do mar.</p>
                </div>
                <div class="lesson-card">
                    <div class="lesson-icon">◐</div>
                    <div class="lesson-title">Abrigo da Fauna</div>
                    <p class="lesson-text">Habitat para tartarugas, aves e espécies nativas do ES.</p>
                </div>
                <div class="lesson-card">
                    <div class="lesson-icon">≋</div>
                    <div class="lesson-title">Controle de Erosão</div>
                    <p class="lesson-text">Reduz impacto de ondas e ventos nas praias.</p>
                </div>
                <div class="lesson-card">
                    <div class="lesson-icon">◎</div>
                    <div class="lesson-title">Regulação Climática</div>
                    <p class="lesson-text">Mantém umidade e temperatura equilibradas.</p>
                </div>
                <div class="lesson-card">
                    <div class="lesson-icon">❦</div>
                    <div class="lesson-title">Sustento Local</div>
                    <p class="lesson-text">Preserva ecossistema que sustenta pesca e turismo.</p>
                </div>
            </div>
            <button class="btn" id="restartBtn" onclick="restartGame()" style="display: none;">
                Nova Investigação
            </button>
        </div>
    </div>
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-agent">
                    <div class="modal-agent-icon">◉</div>
                    <div>
                        <div class="modal-agent-title">Agente da Defesa Civil ES</div>
                        <div>Investigando o Litoral Sul</div>
                    </div>
                </div>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>
    <script>
        let introIndex = 0;
        let gameIndex = 0;
        let conclusionIndex = 0;
        let cluesFound = 0;
        const totalClues = 4;
        let currentClueDialogues = [];
        let currentClueIndex = 0;

        const introDialogues = [
            "Olá! Sou agente da Defesa Civil do Espírito Santo. Precisamos da sua ajuda urgentemente!",
            "Nas últimas semanas, o Litoral Sul do nosso estado - Marataízes, Piúma, Anchieta - está enfrentando uma série de desastres naturais inexplicáveis.",
            "As praias estão desaparecendo rapidamente, casas à beira-mar estão sendo invadidas por ressacas cada vez mais fortes...",
            "...dunas de areia estão invadindo avenidas quando o vento sopra, e nossa fauna nativa está desaparecendo misteriosamente.",
            "Algo muito estranho está acontecendo. E você, como nosso melhor investigador ambiental, precisa descobrir a causa raiz desses problemas!",
            "Vamos começar nossa investigação. Siga-me até o local dos incidentes!"
        ];

        const gameDialogues = [
            "Chegamos ao Litoral Sul! Observe o cenário ao nosso redor.",
            "Veja esses pontos brilhantes no cenário? São locais onde coletei evidências importantes.",
            "Clique em cada um deles para analisarmos juntos as pistas que encontrei.",
            "Cada evidência nos aproximará da solução deste mistério. Vamos lá, investigador!"
        ];

        const conclusionDialogues = [
            "Incrível trabalho, investigador! Você conectou todas as pistas corretamente.",
            "A causa de todos os desastres no nosso Litoral Sul está clara agora: a destruição da vegetação de restinga e de praia!",
            "Quando removemos essas plantas nativas das praias capixabas, perdemos um escudo natural essencial.",
            "A restinga não é apenas vegetação bonita - ela é a guardiã invisível que protege nossas cidades costeiras.",
            "Veja ao lado os papéis vitais que a restinga desempenha no ecossistema do Espírito Santo.",
            "Cada planta que preservamos é um investimento na segurança de Marataízes, Piúma, Anchieta e todo o litoral capixaba!",
            "Missão cumprida! A Defesa Civil do ES agradece sua contribuição. Agora você é um guardião da restinga!"
        ];

        const cluesData = {
            1: {
                title: "◈ Análise da Praia de Marataízes",
                dialogues: [
                    "Observe estas marcas no solo. Aqui temos evidências claras de erosão acelerada.",
                    "Preparei um álbum fotográfico com registros históricos desta área. Vamos analisá-lo...",
                    "Repare neste detalhe importante: nas áreas onde ainda existe vegetação baixa e arbustiva, a areia permanece firme.",
                    "Mas onde não há plantas, o vento e as ondas levam a areia embora sem resistência.",
                    "Primeira conclusão: as raízes das plantas costumavam segurar a areia no lugar. Sem elas, a praia desaparece."
                ],
                hasPhotoAlbum: true,
                photos: [
                    {
                        gradient: "linear-gradient(135deg, #5a7a5a, #3d5d3d, #6a8a6a)",
                        caption: "Marataízes - 2005: Praia abundante com restinga preservada"
                    },
                    {
                        gradient: "linear-gradient(135deg, #6a5a4a, #4a3a2a, #5a4a3a)",
                        caption: "Marataízes - 2024: Mesma localização, erosão severa visível"
                    },
                    {
                        gradient: "linear-gradient(135deg, #3a4a5a, #2a3a4a, #4a5a6a)",
                        caption: "Comparação: A linha d'água avançou mais de 30 metros"
                    }
                ]
            },
            2: {
                title: "❦ Evidência da Vegetação em Piúma",
                dialogues: [
                    "Tenho aqui registros fotográficos de Piúma dos últimos 20 anos.",
                    "Veja estas imagens: áreas que eram cobertas por restinga exuberante - verde, cheia de vida.",
                    "Agora, observe as fotos recentes: completamente desmatadas para dar lugar a construções.",
                    "Estudos científicos mostram que as raízes da restinga podem alcançar até 5 metros de profundidade!",
                    "Essas raízes profundas funcionavam como âncoras naturais, segurando firmemente as dunas de areia.",
                    "Segunda conclusão: a remoção da vegetação eliminou o sistema de ancoragem natural das dunas."
                ]
            },
            3: {
                title: "◐ Relato do Projeto TAMAR - Anchieta",
                dialogues: [
                    "Conversei com pesquisadores do Projeto TAMAR que trabalham em Anchieta.",
                    "Eles relataram algo alarmante: tartarugas marinhas estão tendo dificuldade extrema para desovar.",
                    "Os ninhos que conseguem ser feitos estão sendo destruídos por ressacas que alcançam áreas que antes eram seguras.",
                    "Há 10 anos atrás, essas ondas nunca chegavam tão longe na praia. O que mudou?",
                    "A vegetação de restinga atuava como uma barreira, absorvendo a energia das ondas e mantendo a praia elevada.",
                    "Terceira conclusão: sem essa proteção vegetal, as ondas avançam mais e a fauna perde seus habitats."
                ]
            },
            4: {
                title: "◎ Depoimentos dos Moradores Locais",
                dialogues: [
                    "Entrevistei diversos moradores antigos de Marataízes. Ouça o relato do Seu Antônio, pescador há 40 anos:",
                    "'Moço, antigamente essas dunas eram fixas, cobertas de verde o ano todo. Agora, quando venta forte, a areia invade até a avenida principal!'",
                    "Dona Maria, moradora de Piúma, disse: 'Antes havia plantas que seguravam tudo. Tiraram pra construir e agora olha o resultado...'",
                    "Analisei também dados meteorológicos históricos: os ventos não mudaram de intensidade na região.",
                    "O que mudou foi a ausência da vegetação que segurava a areia firmemente no lugar.",
                    "Conclusão final: TODAS as evidências apontam para a mesma causa - a remoção da vegetação de restinga e praia!",
                    "É ela que mantinha tudo em equilíbrio: dunas fixas, praias estáveis, fauna protegida, comunidades seguras."
                ]
            }
        };

        function changeScreen(nextScreenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(nextScreenId).classList.add('active');
        }

        function nextIntroDialogue() {
            if (introIndex < introDialogues.length) {
                document.getElementById('introText').textContent = introDialogues[introIndex];
                introIndex++;
            }

            if (introIndex === introDialogues.length) {
                document.getElementById('disasterIcons').style.display = 'grid';
                document.getElementById('startBtn').style.display = 'block';
                document.querySelector('#intro .speech-bubble').onclick = null;
                document.querySelector('#intro .speech-bubble-prompt').textContent = 'Pronto para a missão?';
            }
        }

        function startGame() {
            changeScreen('game');
            gameIndex = 0;
            document.querySelector('#game .speech-bubble').onclick = nextGameDialogue;
            nextGameDialogue();
        }

        function nextGameDialogue() {
            if (gameIndex < gameDialogues.length) {
                document.getElementById('gameText').textContent = gameDialogues[gameIndex];
                gameIndex++;
            } else {
                document.getElementById('gameText').textContent = "Investigue as 4 pistas brilhantes para avançar!";
                document.querySelector('#game .speech-bubble-prompt').textContent = 'Clique nas pistas no cenário!';
                document.querySelector('#game .speech-bubble').onclick = null;
            }
        }

        function investigateClue(clueNumber) {
            const clueId = `clue${clueNumber}`;
            const clueElement = document.getElementById(clueId);

            if (clueElement.classList.contains('collected')) {
                return;
            }

            currentClueDialogues = cluesData[clueNumber].dialogues;
            currentClueIndex = 0;

            const clueData = cluesData[clueNumber];
            const modalHeader = `
                <div class="modal-header">
                    <div class="modal-agent">
                        <div class="modal-agent-icon">${clueNumber}</div>
                        <div>
                            <div class="modal-agent-title">${clueData.title}</div>
                            <div>Análise da Evidência</div>
                        </div>
                    </div>
                </div>
            `;

            document.querySelector('#modal .modal-content').innerHTML = modalHeader + '<div class="modal-body" id="modalBodyClue"></div>';
            
            const modalBodyClue = document.getElementById('modalBodyClue');

            // Se for a pista 1, adiciona o álbum de fotos
            if (clueData.hasPhotoAlbum) {
                const photoAlbum = document.createElement('div');
                photoAlbum.className = 'photo-album';
                photoAlbum.innerHTML = `
                    <div class="photo-album-title">Álbum Fotográfico: Evolução da Costa</div>
                    <div class="photo-container" id="photoContainer"></div>
                `;
                modalBodyClue.appendChild(photoAlbum);

                const photoContainer = document.getElementById('photoContainer');
                clueData.photos.forEach(photo => {
                    const photoItem = document.createElement('div');
                    photoItem.className = 'photo-item';
                    photoItem.innerHTML = `
                        <div class="photo-image" style="background: ${photo.gradient}"></div>
                        <div class="photo-caption">${photo.caption}</div>
                    `;
                    photoContainer.appendChild(photoItem);
                });
            }

            const dialogueBox = document.createElement('div');
            dialogueBox.className = 'clue-dialogue';
            dialogueBox.onclick = nextClueDialogue;

            const text = document.createElement('p');
            text.className = 'clue-dialogue-text';
            text.id = 'clueDialogueText';
            text.textContent = currentClueDialogues[currentClueIndex];
            currentClueIndex++;

            const prompt = document.createElement('p');
            prompt.className = 'clue-dialogue-next';
            prompt.textContent = 'Clique para continuar a análise...';

            dialogueBox.appendChild(text);
            dialogueBox.appendChild(prompt);
            modalBodyClue.appendChild(dialogueBox);

            document.getElementById('modal').classList.add('active');
            document.getElementById('modal').dataset.currentClue = clueNumber;
        }

        function nextClueDialogue() {
            const clueDialogueText = document.getElementById('clueDialogueText');
            const dialogueBox = clueDialogueText.closest('.clue-dialogue');
            
            if (currentClueIndex < currentClueDialogues.length) {
                clueDialogueText.textContent = currentClueDialogues[currentClueIndex];
                currentClueIndex++;
            } else {
                const clueNumber = document.getElementById('modal').dataset.currentClue;
                dialogueBox.onclick = null;
                dialogueBox.querySelector('.clue-dialogue-next').textContent = 'Pista Coletada!';

                const modalBodyClue = document.getElementById('modalBodyClue');

                if (!document.querySelector('.close-modal-btn')) {
                    const evidenceBox = document.createElement('div');
                    evidenceBox.className = 'evidence-box';
                    evidenceBox.innerHTML = `<div class="evidence-title">Evidência Final:</div><p>${clueDialogueText.textContent}</p>`;
                    modalBodyClue.appendChild(evidenceBox);

                    const closeModalBtn = document.createElement('button');
                    closeModalBtn.className = 'close-modal-btn';
                    closeModalBtn.textContent = 'Fechar e Coletar Pista';
                    closeModalBtn.onclick = () => collectClue(clueNumber);
                    modalBodyClue.appendChild(closeModalBtn);
                }
            }
        }

        function collectClue(clueNumber) {
            const clueId = `clue${clueNumber}`;
            const circleId = `circle${clueNumber}`;

            document.getElementById('modal').classList.remove('active');
            
            const clueElement = document.getElementById(clueId);
            if (!clueElement.classList.contains('collected')) {
                clueElement.classList.add('collected');
                cluesFound++;
            }
            
            document.getElementById(circleId).classList.add('found');

            if (cluesFound === totalClues) {
                document.getElementById('gameText').textContent = "Todas as evidências foram coletadas! O mistério está claro.";
                document.getElementById('solveBtn').style.display = 'block';
            } else {
                document.getElementById('gameText').textContent = `Pista ${clueNumber} coletada! Faltam ${totalClues - cluesFound} pista(s). Continue investigando!`;
            }

            document.querySelector('#modal .modal-content').innerHTML = `
                <div class="modal-header">
                    <div class="modal-agent">
                        <div class="modal-agent-icon">◉</div>
                        <div>
                            <div class="modal-agent-title">Agente da Defesa Civil ES</div>
                            <div>Investigando o Litoral Sul</div>
                        </div>
                    </div>
                </div>
                <div class="modal-body" id="modalBody"></div>
            `;
        }

        function showConclusion() {
            changeScreen('conclusion');
            conclusionIndex = 0;
            document.querySelector('#conclusion .speech-bubble').onclick = nextConclusionDialogue;
            nextConclusionDialogue();
        }

        function nextConclusionDialogue() {
            if (conclusionIndex < conclusionDialogues.length) {
                document.getElementById('conclusionText').textContent = conclusionDialogues[conclusionIndex];
                conclusionIndex++;
            }

            if (conclusionIndex === 5) {
                document.getElementById('lessonGrid').style.display = 'grid';
            }

            if (conclusionIndex === conclusionDialogues.length) {
                document.getElementById('restartBtn').style.display = 'block';
                document.querySelector('#conclusion .speech-bubble').onclick = null;
                document.querySelector('#conclusion .speech-bubble-prompt').textContent = 'O Guardião da Restinga está pronto!';
            }
        }

        function restartGame() {
            introIndex = 0;
            gameIndex = 0;
            conclusionIndex = 0;
            cluesFound = 0;

            document.getElementById('disasterIcons').style.display = 'none';
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('solveBtn').style.display = 'none';
            document.getElementById('lessonGrid').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'none';
            
            for (let i = 1; i <= totalClues; i++) {
                document.getElementById(`circle${i}`).classList.remove('found');
                document.getElementById(`clue${i}`).classList.remove('collected');
            }
            
            changeScreen('intro');
            document.querySelector('#intro .speech-bubble').onclick = nextIntroDialogue;
            document.querySelector('#intro .speech-bubble-prompt').textContent = 'Clique para continuar';
            nextIntroDialogue();
        }

        document.addEventListener('DOMContentLoaded', () => {
            nextIntroDialogue();
        });
    </script>
</body>
</html>

