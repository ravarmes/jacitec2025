<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guardi√µes do Litoral Sul-Capixaba</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        .game-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: clamp(1.5rem, 5vw, 2rem);
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            font-size: clamp(0.9rem, 3vw, 1rem);
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stat-bar-container {
            background: #ecf0f1;
            height: 25px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .stat-bar {
            height: 100%;
            transition: width 0.5s ease, background 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .stat-budget {
            background: linear-gradient(90deg, #f39c12, #e67e22);
        }

        .stat-community {
            background: linear-gradient(90deg, #3498db, #2980b9);
        }

        .stat-sea {
            background: linear-gradient(90deg, #27ae60, #e74c3c);
        }

        .year-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .situation-card {
            background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f5 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #3498db;
        }

        .situation-card.critical {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-left: 5px solid #e74c3c;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .situation-title {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .situation-location {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 15px;
            font-style: italic;
        }

        .situation-desc {
            color: #34495e;
            line-height: 1.6;
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .choices-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .choice-btn {
            background: white;
            border: 2px solid #3498db;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1rem;
            color: #2c3e50;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .choice-btn:hover:not(.disabled) {
            background: #3498db;
            color: white;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .choice-btn:active:not(.disabled) {
            transform: translateX(3px);
        }

        .choice-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #ecf0f1;
            border-color: #bdc3c7;
        }

        .choice-cost {
            font-size: 0.85rem;
            opacity: 0.8;
            font-weight: 600;
        }

        .welcome-screen {
            text-align: center;
        }

        .welcome-screen h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .welcome-screen p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 25px;
            font-size: 1.05rem;
        }

        .welcome-screen input {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            font-size: 1rem;
            border: 2px solid #3498db;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-weight: bold;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .game-over {
            text-align: center;
        }

        .game-over h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .game-over.victory h2 {
            color: #27ae60;
        }

        .game-over.defeat h2 {
            color: #e74c3c;
        }

        .game-over p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 25px;
            font-size: 1.05rem;
        }

        .hidden {
            display: none;
        }

        .feedback-message {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
        }

        .feedback-message.positive {
            background: #d4edda;
            border-color: #28a745;
        }

        .feedback-message.negative {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .feedback-message.neutral {
            background: #d1ecf1;
            border-color: #17a2b8;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .player-info {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 12px 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            color: #2c3e50;
        }

        .lives-counter {
            background: linear-gradient(135deg, #ff7675 0%, #d63031 100%);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .game-card {
                padding: 20px;
            }

            .choice-btn {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-card" id="welcomeScreen">
            <div class="welcome-screen">
                <h2>üåä Guardi√µes do Litoral Sul-Capixaba</h2>
                <p>
                    Bem-vindo ao simulador de gest√£o costeira do litoral sul capixaba! 
                    Voc√™ assume o papel de gestor ambiental respons√°vel por proteger 
                    as cidades litor√¢neas do avan√ßo do n√≠vel do mar.
                </p>
                <p>
                    A cada ano, voc√™ enfrentar√° situa√ß√µes reais e precisar√° tomar decis√µes 
                    dif√≠ceis que afetar√£o o or√ßamento municipal, o apoio da comunidade e 
                    o n√≠vel do mar. Suas escolhas determinar√£o o futuro das praias capixabas!
                </p>
                <p style="font-size: 0.9rem; color: #7f8c8d;">
                    üí° Dica: O or√ßamento aumenta anualmente baseado no apoio comunit√°rio!
                </p>
                <input type="text" id="playerName" placeholder="Digite seu nome" maxlength="25">
                <br>
                <button class="btn-primary" id="startBtn">Come√ßar Jornada</button>
            </div>
        </div>

        <div class="game-card hidden" id="gameScreen">
            <div class="header">
                <h1>üåä Guardi√µes do Litoral Sul-Capixaba</h1>
                <p>Esp√≠rito Santo</p>
            </div>

            <div class="player-info" id="playerInfo">Gestor(a): <span id="playerNameDisplay"></span></div>

            <div class="lives-counter">
                üë• Vidas Salvas: <span id="livesSaved">0</span> mil | 
                üíî Vidas Perdidas: <span id="livesLost">0</span> mil
            </div>

            <div class="year-display">
                üìÖ Ano <span id="yearDisplay">1</span> de 25
            </div>

            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-label">üí∞ Or√ßamento Municipal</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar stat-budget" id="budgetBar">100</div>
                    </div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">ü§ù Apoio Comunit√°rio</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar stat-community" id="communityBar">100%</div>
                    </div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">üåä N√≠vel do Mar</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar stat-sea" id="seaBar">30%</div>
                    </div>
                </div>
            </div>

            <div id="feedbackContainer"></div>

            <div class="situation-card" id="situationCard">
                <div class="situation-title" id="situationTitle"></div>
                <div class="situation-location" id="situationLocation"></div>
                <div class="situation-desc" id="situationDesc"></div>
                <div class="choices-container" id="choicesContainer"></div>
            </div>
        </div>

        <div class="game-card hidden" id="gameOverScreen">
            <div class="game-over" id="gameOverContent">
                <h2 id="gameOverTitle"></h2>
                <p id="gameOverMessage"></p>
                <button class="btn-primary" onclick="location.reload()">Jogar Novamente</button>
            </div>
        </div>
    </div>

    <script>
        const coastalCities = ['Marata√≠zes', 'Itaipava', 'Presidente Kennedy', 'Pi√∫ma', 'Iconha', 'Anchieta', 'Itapemirim'];
        
        function getRandomCity() {
            return coastalCities[Math.floor(Math.random() * coastalCities.length)];
        }

        const situations = [
            // EVENTOS CR√çTICOS (8 eventos)
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Ciclone Categoria 4',
                desc: 'Um ciclone devastador se aproxima! Voc√™ tem recursos limitados: pode evacuar TODA a cidade costeira (50 mil pessoas) deixando o porto desprotegido, ou proteger o porto (vital para economia regional) evacuando apenas 30% da popula√ß√£o. O que fazer?',
                critical: true,
                choices: [
                    { text: 'Evacuar toda a popula√ß√£o', cost: 'üí∞ -80', effect: { budget: -80, sea: 15, community: 40, lives: 50 }, feedback: 'Todas as 50 mil pessoas foram salvas, mas o porto foi destru√≠do. A economia regional sofrer√° por anos.', type: 'neutral' },
                    { text: 'Proteger o porto e evacuar 30%', cost: 'üí∞ -50', effect: { budget: -50, sea: 5, community: -30, lives: 15, livesLost: 12 }, feedback: 'O porto foi salvo e 15 mil pessoas evacuadas, mas 12 mil ficaram expostas ao ciclone. Fam√≠lias perderam entes queridos.', type: 'negative' },
                    { text: 'Pedir ajuda federal emergencial', cost: 'Gr√°tis', effect: { sea: 20, community: -25, lives: 25, livesLost: 10 }, feedback: 'Ajuda federal chegou tarde. Conseguiu salvar 25 mil, mas 10 mil foram afetadas pelo ciclone.', type: 'negative' }
                ]
            },
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Represa Costeira Rachando',
                desc: 'Uma represa que protege 3 bairros costeiros est√° com rachaduras cr√≠ticas. Voc√™ pode: refor√ßar emergencialmente (arriscado, mas mant√©m 80 mil pessoas em suas casas), ou evacuar todos imediatamente (seguro, mas causar√° p√¢nico e caos log√≠stico).',
                critical: true,
                choices: [
                    { text: 'Refor√ßar a represa emergencialmente', cost: 'üí∞ -70', effect: { budget: -70, sea: -15, community: 25, lives: 80, livesLost: 3 }, feedback: 'O refor√ßo funcionou! 80 mil pessoas mantidas em seguran√ßa, mas 3 trabalhadores se feriram gravemente na opera√ß√£o de risco.', type: 'positive' },
                    { text: 'Evacuar todos imediatamente', cost: 'üí∞ -90', effect: { budget: -90, sea: 20, community: -15, lives: 80 }, feedback: 'Todas as 80 mil pessoas foram evacuadas com seguran√ßa, mas o p√¢nico causou acidentes e a represa acabou rompendo, inundando os bairros.', type: 'neutral' },
                    { text: 'Usar volunt√°rios da comunidade', cost: 'Gr√°tis', effect: { budget: -10, sea: 25, community: 15, lives: 40, livesLost: 12 }, feedback: 'Volunt√°rios heroicos salvaram 40 mil pessoas, mas 12 mil ficaram expostas ao rompimento.', type: 'negative' }
                ]
            },
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Tsunami Iminente',
                desc: 'Alerta de tsunami detectado! Voc√™ tem 2 horas. Pode: usar todos os recursos para evacuar zona costeira (√°rea densamente povoada mas acess√≠vel) OU priorizar comunidade pesqueira isolada (menor popula√ß√£o, acesso dif√≠cil). N√£o h√° tempo para ambos.',
                critical: true,
                choices: [
                    { text: 'Evacuar zona costeira densamente povoada', cost: 'üí∞ -100', effect: { budget: -100, sea: 20, community: 30, lives: 60, livesLost: 8 }, feedback: 'Salvou 60 mil pessoas da zona costeira! Mas 8 mil pescadores da comunidade isolada n√£o foram alcan√ßados a tempo...', type: 'positive' },
                    { text: 'Priorizar comunidade pesqueira isolada', cost: 'üí∞ -60', effect: { budget: -60, sea: 25, community: -40, lives: 8, livesLost: 25 }, feedback: 'As 8 mil pessoas da comunidade isolada foram salvas, mas 25 mil da zona costeira foram atingidas. Cr√≠ticas massivas √† sua gest√£o.', type: 'negative' },
                    { text: 'Usar sistema de alerta por sirenes', cost: 'Gr√°tis', effect: { budget: -15, sea: 30, community: -20, lives: 25, livesLost: 20 }, feedback: 'Sistema de alerta salvou 25 mil, mas 20 mil n√£o ouviram as sirenes a tempo.', type: 'negative' }
                ]
            },
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Escolha Imposs√≠vel',
                desc: 'Um vazamento qu√≠mico amea√ßa contaminar o rio que abastece 100 mil pessoas. Voc√™ pode: desviar o vazamento para uma √°rea rural (contamina 5 mil pessoas mas salva 95 mil) OU tentar conter no local (risco de contaminar todos os 100 mil se falhar).',
                critical: true,
                choices: [
                    { text: 'Desviar para √°rea rural (sacrificar 5 mil)', cost: 'üí∞ -80', effect: { budget: -80, community: -40, lives: 95, livesLost: 5 }, feedback: 'Salvou 95 mil pessoas, mas 5 mil foram sacrificadas. Cr√≠ticas internacionais.', type: 'neutral' },
                    { text: 'Tentar conter no local (risco total)', cost: 'üí∞ -60', effect: { budget: -60, sea: 10, community: 20, lives: 100, livesLost: 15 }, feedback: 'Conteve parcialmente, mas 15 mil pessoas foram afetadas pela contamina√ß√£o.', type: 'negative' },
                    { text: 'Evacuar apenas √°reas cr√≠ticas', cost: 'Gr√°tis', effect: { budget: -20, community: -30, lives: 60, livesLost: 25 }, feedback: 'Conseguiu salvar 60 mil, mas 25 mil foram gravemente afetadas.', type: 'negative' }
                ]
            },
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Hospital vs Praia',
                desc: 'O hospital regional precisa de expans√£o urgente. O √∫nico terreno dispon√≠vel √© uma √°rea de restinga que protege a praia. Construir l√° destr√≥i a prote√ß√£o natural, mas salva milhares de vidas.',
                critical: true,
                choices: [
                    { text: 'Construir hospital (destruir restinga)', cost: 'üí∞ -100', effect: { budget: -100, sea: 25, community: 30, lives: 50 }, feedback: 'Hospital salvar√° 50 mil vidas, mas a praia ficar√° desprotegida contra o mar.', type: 'positive' },
                    { text: 'Preservar restinga (buscar alternativa)', cost: 'üí∞ -50', effect: { budget: -50, sea: -10, community: -25, livesLost: 10 }, feedback: 'Preservou o ecossistema, mas 10 mil pessoas n√£o ter√£o acesso a cuidados m√©dicos.', type: 'negative' },
                    { text: 'Usar estrutura tempor√°ria', cost: 'Gr√°tis', effect: { budget: -15, sea: 5, community: -10, lives: 15, livesLost: 8 }, feedback: 'Estrutura tempor√°ria salva 15 mil, mas 8 mil ficam sem atendimento adequado.', type: 'negative' }
                ]
            },
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Inc√™ndio na Reserva',
                desc: 'Um inc√™ndio de grandes propor√ß√µes atinge reserva ambiental pr√≥xima a duas comunidades. Ventos fortes espalham as chamas rapidamente. Voc√™ deve escolher qual comunidade priorizar.',
                critical: true,
                choices: [
                    { text: 'Salvar comunidade tur√≠stica (5000 pessoas)', cost: 'üí∞ -75', effect: { budget: -75, community: 25, lives: 5 }, feedback: 'Comunidade tur√≠stica salva, mas a outra comunidade sofreu graves perdas.', type: 'neutral' },
                    { text: 'Salvar comunidade pesqueira (3000 pessoas)', cost: 'üí∞ -45', effect: { budget: -45, community: -20, lives: 3, livesLost: 2 }, feedback: 'Comunidade pesqueira protegida, mas turismo afetado criticamente.', type: 'negative' },
                    { text: 'Dividir recursos (arriscado)', cost: 'Gr√°tis', effect: { budget: -20, community: -15, lives: 4, livesLost: 3 }, feedback: 'Conseguiu salvar parte de ambas comunidades, mas muitas vidas foram perdidas.', type: 'negative' }
                ]
            },
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Naufr√°gio com Carga Perigosa',
                desc: 'Um navio carregado com produtos qu√≠micos naufragou pr√≥ximo √† costa. A carga est√° vazando e amea√ßa contaminar toda a vida marinha da regi√£o por d√©cadas.',
                critical: true,
                choices: [
                    { text: 'Opera√ß√£o de resgate completa', cost: 'üí∞ -120', effect: { budget: -120, sea: -20, community: 35, lives: 8 }, feedback: 'Carga recuperada com sucesso! Costa protegida de desastre ambiental.', type: 'positive' },
                    { text: 'Conter vazamento parcialmente', cost: 'üí∞ -60', effect: { budget: -60, sea: 15, community: 10, lives: 3, livesLost: 2 }, feedback: 'Conteve parte do vazamento, mas danos ambientais significativos.', type: 'neutral' },
                    { text: 'Isolar a √°rea e monitorar', cost: 'Gr√°tis', effect: { sea: 35, community: -30, livesLost: 5 }, feedback: 'Contamina√ß√£o se espalhou, afetando pesca e turismo por anos.', type: 'negative' }
                ]
            },
            {
                title: '‚ö†Ô∏è DILEMA CR√çTICO: Colapso do Sistema de Drenagem',
                desc: 'O sistema de drenagem da cidade entrou em colapso durante uma tempestade hist√≥rica. Bairros inteiros est√£o alagando rapidamente.',
                critical: true,
                choices: [
                    { text: 'Reparo emergencial completo', cost: 'üí∞ -95', effect: { budget: -95, sea: -15, community: 30, lives: 12 }, feedback: 'Sistema recuperado a tempo! Milhares de casas salvas das inunda√ß√µes.', type: 'positive' },
                    { text: 'Focar nas √°reas mais cr√≠ticas', cost: 'üí∞ -50', effect: { budget: -50, sea: 10, community: 5, lives: 6, livesLost: 4 }, feedback: 'Salvou as √°reas mais cr√≠ticas, mas bairros perif√©ricos foram severamente afetados.', type: 'neutral' },
                    { text: 'Abrigos tempor√°rios', cost: 'Gr√°tis', effect: { budget: -25, sea: 25, community: -25, lives: 3, livesLost: 8 }, feedback: 'Muitas fam√≠lias perderam suas casas e pertences nas inunda√ß√µes.', type: 'negative' }
                ]
            },

            // EVENTOS NORMAIS (22 eventos)
            {
                title: 'Ressaca Severa na Costa',
                desc: 'Uma forte ressaca est√° atingindo o litoral, causando eros√£o nas praias e amea√ßando casas pr√≥ximas ao mar. Moradores est√£o preocupados e pressionam por uma solu√ß√£o urgente.',
                choices: [
                    { text: 'Construir quebra-mar emergencial', cost: 'üí∞ -45', effect: { budget: -45, sea: -15, community: 15, lives: 8 }, feedback: 'O quebra-mar protegeu a costa e tranquilizou a popula√ß√£o!', type: 'positive' },
                    { text: 'Evacuar temporariamente as fam√≠lias', cost: 'üí∞ -25', effect: { budget: -25, sea: 5, community: 10, lives: 5 }, feedback: 'Fam√≠lias foram protegidas, mas a eros√£o continuou.', type: 'neutral' },
                    { text: 'Monitorar e n√£o agir agora', cost: 'Gr√°tis', effect: { sea: 12, community: -20, livesLost: 3 }, feedback: 'A situa√ß√£o piorou e a comunidade perdeu a confian√ßa em voc√™.', type: 'negative' }
                ]
            },
            {
                title: 'Proposta de Restaura√ß√£o de Manguezais',
                desc: 'Cientistas prop√µem um projeto de reflorestamento de manguezais, que atuariam como barreira natural contra o avan√ßo do mar.',
                choices: [
                    { text: 'Investir no projeto completo', cost: 'üí∞ -55', effect: { budget: -55, sea: -20, community: 20, lives: 12 }, feedback: 'Os manguezais est√£o crescendo e protegendo a costa!', type: 'positive' },
                    { text: 'Fazer projeto piloto menor', cost: 'üí∞ -30', effect: { budget: -30, sea: -8, community: 8, lives: 4 }, feedback: 'O projeto piloto mostrou resultados promissores.', type: 'neutral' },
                    { text: 'Recusar o projeto', cost: 'Gr√°tis', effect: { sea: 8, community: -15, livesLost: 2 }, feedback: 'Ambientalistas criticaram duramente a decis√£o.', type: 'negative' }
                ]
            },
            {
                title: 'Constru√ß√µes Irregulares',
                desc: 'Fiscaliza√ß√£o descobriu constru√ß√µes irregulares pr√≥ximas ao mar, em √°rea de preserva√ß√£o. Propriet√°rios s√£o influentes localmente.',
                choices: [
                    { text: 'Demolir todas as constru√ß√µes', cost: 'üí∞ -40', effect: { budget: -40, sea: -12, community: -25, lives: 6 }, feedback: 'A√ß√£o impopular, mas necess√°ria para preservar a costa.', type: 'neutral' },
                    { text: 'Negociar realoca√ß√£o gradual', cost: 'üí∞ -50', effect: { budget: -50, sea: -8, community: 5, lives: 8 }, feedback: 'Acordo diplom√°tico preservou a √°rea e manteve a paz.', type: 'positive' },
                    { text: 'Legalizar as constru√ß√µes', cost: 'Gr√°tis', effect: { budget: 15, sea: 15, community: -10, livesLost: 4 }, feedback: 'Ganho pol√≠tico imediato, mas dano ambiental permanente.', type: 'negative' }
                ]
            },
            {
                title: 'Tempestade se Aproxima',
                desc: 'Previs√£o meteorol√≥gica alerta para uma tempestade tropical que atingir√° a regi√£o em 48 horas.',
                choices: [
                    { text: 'Ativar plano de emerg√™ncia completo', cost: 'üí∞ -50', effect: { budget: -50, community: 25, lives: 20 }, feedback: 'Prepara√ß√£o salvou vidas e minimizou danos!', type: 'positive' },
                    { text: 'Alertar popula√ß√£o b√°sico', cost: 'üí∞ -20', effect: { budget: -20, sea: 10, community: 5, lives: 8, livesLost: 3 }, feedback: 'Houve alguns danos e v√≠timas, mas poderia ser pior.', type: 'neutral' },
                    { text: 'Apenas emitir comunicado', cost: 'Gr√°tis', effect: { sea: 18, budget: -20, community: -30, livesLost: 10 }, feedback: 'Danos graves! Popula√ß√£o se sentiu abandonada e 10 mil pessoas foram afetadas.', type: 'negative' }
                ]
            },
            {
                title: 'Projeto de Turismo Sustent√°vel',
                desc: 'Empres√°rios prop√µem criar polo de ecoturismo nas praias, com compromisso de preserva√ß√£o ambiental.',
                choices: [
                    { text: 'Apoiar com investimento municipal', cost: 'üí∞ -40', effect: { budget: 20, community: 20, lives: 5 }, feedback: 'Turismo trouxe retorno financeiro e desenvolvimento!', type: 'positive' },
                    { text: 'Permitir mas sem investir', cost: 'Gr√°tis', effect: { budget: 10, community: 10 }, feedback: 'Projeto avan√ßou lentamente com recursos privados.', type: 'neutral' },
                    { text: 'Rejeitar o projeto', cost: 'Gr√°tis', effect: { community: -15 }, feedback: 'Empres√°rios frustrados com a falta de apoio.', type: 'negative' }
                ]
            },
            {
                title: 'Eros√£o em Praia Principal',
                desc: 'A praia mais movimentada est√° perdendo 2 metros de areia por m√™s. Restaurantes e quiosques est√£o amea√ßados.',
                choices: [
                    { text: 'Fazer reposi√ß√£o de areia', cost: 'üí∞ -35', effect: { budget: -35, sea: -10, community: 20 }, feedback: 'Praia restaurada, com√©rcio salvo!', type: 'positive' },
                    { text: 'Construir estruturas de conten√ß√£o', cost: 'üí∞ -45', effect: { budget: -45, sea: -18, community: 15 }, feedback: 'Solu√ß√£o duradoura protegeu a praia!', type: 'positive' },
                    { text: 'Deixar processo natural', cost: 'Gr√°tis', effect: { sea: 10, budget: -15, community: -25 }, feedback: 'Com√©rcios fecharam e turismo despencou.', type: 'negative' }
                ]
            },
            {
                title: 'El Ni√±o Intenso',
                desc: 'El Ni√±o est√° provocando eleva√ß√£o da temperatura do oceano e ondas mais altas na regi√£o.',
                choices: [
                    { text: 'Criar for√ßa-tarefa de monitoramento', cost: 'üí∞ -20', effect: { budget: -20, sea: 5, community: 15 }, feedback: 'Dados ajudaram no planejamento!', type: 'positive' },
                    { text: 'Refor√ßar estruturas existentes', cost: 'üí∞ -30', effect: { budget: -30, sea: -8, community: 10 }, feedback: 'Infraestrutura resistiu melhor aos impactos.', type: 'positive' },
                    { text: 'Apenas aguardar passar', cost: 'Gr√°tis', effect: { sea: 15, community: -15 }, feedback: 'Impactos foram severos e causaram muito dano.', type: 'negative' }
                ]
            },
            {
                title: 'Vazamento de Esgoto',
                desc: 'Sistema de tratamento falhou e est√° despejando esgoto pr√≥ximo √†s praias. Turistas est√£o deixando a regi√£o.',
                choices: [
                    { text: 'Reparo emergencial imediato', cost: 'üí∞ -40', effect: { budget: -40, community: 20 }, feedback: 'Problema resolvido rapidamente!', type: 'positive' },
                    { text: 'Reparo gradual em 2 semanas', cost: 'üí∞ -20', effect: { budget: -20, sea: 5, community: -10 }, feedback: 'Danos √† imagem continuaram durante o reparo.', type: 'neutral' },
                    { text: 'Minimizar problema', cost: 'Gr√°tis', effect: { sea: 8, community: -30, budget: -10 }, feedback: 'Esc√¢ndalo de sa√∫de p√∫blica manchou sua gest√£o!', type: 'negative' }
                ]
            },
            {
                title: 'Recifes Artificiais',
                desc: 'Universidade prop√µe instalar recifes artificiais para reduzir for√ßa das ondas e criar habitat marinho.',
                choices: [
                    { text: 'Financiar projeto experimental', cost: 'üí∞ -35', effect: { budget: -35, sea: -15, community: 18 }, feedback: 'Recifes funcionaram! Ondas reduziram!', type: 'positive' },
                    { text: 'Apoiar com contrapartida reduzida', cost: 'üí∞ -15', effect: { budget: -15, sea: -5, community: 8 }, feedback: 'Projeto menor mostrou potencial.', type: 'neutral' },
                    { text: 'N√£o participar', cost: 'Gr√°tis', effect: { community: -10 }, feedback: 'Universidade buscou financiamento em outra regi√£o.', type: 'negative' }
                ]
            },
            {
                title: 'Plano de Evacua√ß√£o',
                desc: 'Moradores de √°rea de risco exigem plano oficial de evacua√ß√£o para emerg√™ncias clim√°ticas.',
                choices: [
                    { text: 'Criar plano completo com abrigos', cost: 'üí∞ -30', effect: { budget: -30, community: 30 }, feedback: 'Popula√ß√£o se sente muito mais segura!', type: 'positive' },
                    { text: 'Fazer orienta√ß√µes b√°sicas', cost: 'üí∞ -10', effect: { budget: -10, community: 10 }, feedback: 'Informa√ß√µes tranquilizaram parcialmente.', type: 'neutral' },
                    { text: 'Dizer que n√£o h√° risco', cost: 'Gr√°tis', effect: { community: -25 }, feedback: 'Comunidade sentiu descaso e perdeu confian√ßa.', type: 'negative' }
                ]
            },
            {
                title: 'Invas√£o de √Ågua Salgada',
                desc: 'O avan√ßo do mar est√° salinizando po√ßos de √°gua doce que abastecem comunidades costeiras. Agricultores est√£o perdendo suas planta√ß√µes.',
                choices: [
                    { text: 'Instalar sistema de dessaliniza√ß√£o', cost: 'üí∞ -60', effect: { budget: -60, sea: -10, community: 25, lives: 8 }, feedback: 'Sistema fornece √°gua pot√°vel para a comunidade!', type: 'positive' },
                    { text: 'Perfurar po√ßos mais profundos', cost: 'üí∞ -35', effect: { budget: -35, sea: 5, community: 10, lives: 4 }, feedback: 'Solu√ß√£o tempor√°ria, mas aliviou a crise.', type: 'neutral' },
                    { text: 'Distribuir √°gua mineral', cost: 'Gr√°tis', effect: { budget: -15, community: -15, livesLost: 3 }, feedback: 'Solu√ß√£o paliativa n√£o resolveu o problema de fundo.', type: 'negative' }
                ]
            },
            {
                title: 'Projeto de Energia das Ondas',
                desc: 'Empresa prop√µe instalar geradores que convertem a for√ßa das ondas em energia limpa, mas pode alterar as correntes marinhas.',
                choices: [
                    { text: 'Aprovar com estudos ambientais', cost: 'üí∞ -45', effect: { budget: 30, sea: -5, community: 15 }, feedback: 'Energia limpa gerada sem impactos significativos!', type: 'positive' },
                    { text: 'Aprovar sem restri√ß√µes', cost: 'üí∞ -20', effect: { budget: 40, sea: 10, community: -10 }, feedback: 'Ganho financeiro, mas altera√ß√µes nas correntes preocupam.', type: 'neutral' },
                    { text: 'Rejeitar por precau√ß√£o', cost: 'Gr√°tis', effect: { community: 5 }, feedback: 'Decis√£o conservadora agradou ambientalistas.', type: 'neutral' }
                ]
            },
            {
                title: 'Fen√¥meno de Mar√© Vermelha',
                desc: 'Prolifera√ß√£o de algas t√≥xicas est√° matando peixes e tornando as praias perigosas para banho.',
                choices: [
                    { text: 'Fechar praias e investigar causas', cost: 'üí∞ -25', effect: { budget: -25, community: 15, lives: 5 }, feedback: 'Medida preventiva protegeu a popula√ß√£o!', type: 'positive' },
                    { text: 'Monitorar sem fechar praias', cost: 'üí∞ -10', effect: { budget: -10, community: -10, livesLost: 2 }, feedback: 'Algumas pessoas foram intoxicadas.', type: 'negative' },
                    { text: 'Ignorar como evento natural', cost: 'Gr√°tis', effect: { sea: 5, community: -25, livesLost: 5 }, feedback: 'Crise de sa√∫de p√∫blica e turismo afetado.', type: 'negative' }
                ]
            },
            {
                title: 'Projeto de Educa√ß√£o Ambiental',
                desc: 'Escolas locais querem implementar programa de conscientiza√ß√£o sobre prote√ß√£o costeira para crian√ßas.',
                choices: [
                    { text: 'Financiar programa completo', cost: 'üí∞ -20', effect: { budget: -20, community: 30 }, feedback: 'Futuras gera√ß√µes mais conscientes!', type: 'positive' },
                    { text: 'Apoiar com materiais b√°sicos', cost: 'üí∞ -8', effect: { budget: -8, community: 15 }, feedback: 'Contribui√ß√£o modesta, mas bem-vinda.', type: 'neutral' },
                    { text: 'Delegar para iniciativa privada', cost: 'Gr√°tis', effect: { community: -5 }, feedback: 'Oportunidade perdida de engajar a comunidade.', type: 'negative' }
                ]
            },
            {
                title: 'Crise nos Molhes da Barra',
                desc: 'Os molhes que protegem a barra do porto est√£o se deteriorando rapidamente, amea√ßando a navega√ß√£o.',
                choices: [
                    { text: 'Reconstruir completamente', cost: 'üí∞ -70', effect: { budget: -70, sea: -12, community: 20 }, feedback: 'Infraestrutura portu√°ria protegida!', type: 'positive' },
                    { text: 'Reparos emergenciais', cost: 'üí∞ -35', effect: { budget: -35, sea: 3, community: 8 }, feedback: 'Solu√ß√£o tempor√°ria implementada.', type: 'neutral' },
                    { text: 'Fechar o porto temporariamente', cost: 'Gr√°tis', effect: { budget: -50, community: -30 }, feedback: 'Preju√≠zo econ√¥mico significativo.', type: 'negative' }
                ]
            },
            {
                title: 'Projeto de Corredor Ecol√≥gico',
                desc: 'Bi√≥logos prop√µem conectar fragmentos de mata atl√¢ntica para proteger a biodiversidade costeira.',
                choices: [
                    { text: 'Criar corredor completo', cost: 'üí∞ -40', effect: { budget: -40, sea: -8, community: 25 }, feedback: 'Ecossistema fortalecido contra mudan√ßas clim√°ticas!', type: 'positive' },
                    { text: 'Proteger √°reas existentes', cost: 'üí∞ -20', effect: { budget: -20, sea: -3, community: 12 }, feedback: 'Medida conservadora mas eficaz.', type: 'neutral' },
                    { text: 'Priorizar desenvolvimento', cost: 'Gr√°tis', effect: { sea: 8, community: -20 }, feedback: 'Perda de biodiversidade preocupa cientistas.', type: 'negative' }
                ]
            },
            {
                title: 'Crise na Pesca Artesanal',
                desc: 'Pescadores tradicionais est√£o sem peixes devido √†s mudan√ßas nas correntes marinhas. Fam√≠lias passam necessidade.',
                choices: [
                    { text: 'Programa de renda b√°sica tempor√°ria', cost: 'üí∞ -30', effect: { budget: -30, community: 35, lives: 3 }, feedback: 'Comunidade pesqueira apoiada durante a crise!', type: 'positive' },
                    { text: 'Capacita√ß√£o para outras atividades', cost: 'üí∞ -18', effect: { budget: -18, community: 18 }, feedback: 'Alternativas econ√¥micas sendo desenvolvidas.', type: 'neutral' },
                    { text: 'Deixar mercado se ajustar', cost: 'Gr√°tis', effect: { community: -25, livesLost: 2 }, feedback: 'Fam√≠lias pesqueiras em situa√ß√£o cr√≠tica.', type: 'negative' }
                ]
            },
            // NOVOS EVENTOS ADICIONADOS
            {
                title: 'Projeto de Dunas Artificiais',
                desc: 'Engenheiros prop√µem criar dunas artificiais para proteger a costa da eros√£o. As dunas seriam vegetadas com plantas nativas.',
                choices: [
                    { text: 'Implementar projeto completo', cost: 'üí∞ -38', effect: { budget: -38, sea: -12, community: 18 }, feedback: 'Dunas est√£o protegendo a costa eficazmente!', type: 'positive' },
                    { text: 'Fazer teste em √°rea pequena', cost: 'üí∞ -18', effect: { budget: -18, sea: -4, community: 8 }, feedback: 'Teste promissor, mas prote√ß√£o limitada.', type: 'neutral' },
                    { text: 'N√£o investir agora', cost: 'Gr√°tis', effect: { sea: 6, community: -8 }, feedback: 'Oportunidade perdida de prote√ß√£o costeira.', type: 'negative' }
                ]
            },
            {
                title: 'Contamina√ß√£o por Micropl√°sticos',
                desc: 'Estudo revela altos n√≠veis de micropl√°sticos nas praias, afetando a vida marinha e potencialmente a sa√∫de humana.',
                choices: [
                    { text: 'Programa de limpeza avan√ßado', cost: 'üí∞ -28', effect: { budget: -28, sea: -6, community: 22 }, feedback: 'Praias significativamente mais limpas!', type: 'positive' },
                    { text: 'Campanha educativa b√°sica', cost: 'üí∞ -12', effect: { budget: -12, community: 12 }, feedback: 'Conscientiza√ß√£o ajudou, mas problema persiste.', type: 'neutral' },
                    { text: 'Aguardar estudos adicionais', cost: 'Gr√°tis', effect: { sea: 4, community: -12 }, feedback: 'Problema se agravou durante a espera.', type: 'negative' }
                ]
            },
            {
                title: 'Sistema de Alerta de Ressacas',
                desc: 'Meteorologistas prop√µem instalar sistema de alerta precoce para ressacas, dando tempo para prepara√ß√£o.',
                choices: [
                    { text: 'Instalar sistema completo', cost: 'üí∞ -32', effect: { budget: -32, community: 25, lives: 6 }, feedback: 'Sistema salvou vidas durante ressacas recentes!', type: 'positive' },
                    { text: 'Sistema b√°sico com volunt√°rios', cost: 'üí∞ -15', effect: { budget: -15, community: 12, lives: 2 }, feedback: 'Sistema limitado mas √∫til.', type: 'neutral' },
                    { text: 'Usar alertas existentes', cost: 'Gr√°tis', effect: { community: -8 }, feedback: 'Falta de prepara√ß√£o causou danos evit√°veis.', type: 'negative' }
                ]
            },
            {
                title: 'Crise no Abastecimento de Energia',
                desc: 'Tempestade danificou linhas de transmiss√£o, deixando comunidades costeiras sem energia por dias.',
                choices: [
                    { text: 'Reparo emergencial completo', cost: 'üí∞ -42', effect: { budget: -42, community: 20 }, feedback: 'Energia restaurada rapidamente!', type: 'positive' },
                    { text: 'Reparos priorit√°rios apenas', cost: 'üí∞ -22', effect: { budget: -22, community: 8 }, feedback: 'Algumas √°reas ficaram sem energia por mais tempo.', type: 'neutral' },
                    { text: 'Aguardar conserto normal', cost: 'Gr√°tis', effect: { community: -18 }, feedback: 'Comunidade ficou indignada com a demora.', type: 'negative' }
                ]
            },
            {
                title: 'Projeto de Pesquisa Oceanogr√°fica',
                desc: 'Universidade quer instalar base de pesquisa para monitorar mudan√ßas clim√°ticas no litoral.',
                choices: [
                    { text: 'Apoiar financeiramente', cost: 'üí∞ -25', effect: { budget: -25, sea: -3, community: 15 }, feedback: 'Pesquisa gerou dados valiosos para prote√ß√£o costeira!', type: 'positive' },
                    { text: 'Ceder espa√ßo sem custo', cost: 'Gr√°tis', effect: { community: 8 }, feedback: 'Pesquisa avan√ßou com recursos limitados.', type: 'neutral' },
                    { text: 'N√£o apoiar', cost: 'Gr√°tis', effect: { community: -10 }, feedback: 'Universidade levou projeto para outro estado.', type: 'negative' }
                ]
            },
            {
                title: 'Problema com Esp√©cies Invasoras',
                desc: 'Esp√©cie marinha invasora est√° amea√ßando o ecossistema local e afetando a pesca tradicional.',
                choices: [
                    { text: 'Programa de controle integrado', cost: 'üí∞ -34', effect: { budget: -34, sea: -7, community: 16 }, feedback: 'Esp√©cie invasora controlada com sucesso!', type: 'positive' },
                    { text: 'Controle limitado', cost: 'üí∞ -16', effect: { budget: -16, community: 6 }, feedback: 'Problema contido parcialmente.', type: 'neutral' },
                    { text: 'Deixar equil√≠brio natural', cost: 'Gr√°tis', effect: { sea: 8, community: -14 }, feedback: 'Esp√©cie invasora se proliferou rapidamente.', type: 'negative' }
                ]
            },
            {
                title: 'Moderniza√ß√£o do Sistema de Meteorologia',
                desc: 'Tecnologia obsoleta impede previs√µes precisas do tempo, crucial para a seguran√ßa costeira.',
                choices: [
                    { text: 'Atualizar sistema completo', cost: 'üí∞ -48', effect: { budget: -48, community: 20, lives: 4 }, feedback: 'Previs√µes precisas salvaram vidas!', type: 'positive' },
                    { text: 'Atualiza√ß√£o parcial', cost: 'üí∞ -24', effect: { budget: -24, community: 10 }, feedback: 'Melhora modesta nas previs√µes.', type: 'neutral' },
                    { text: 'Manter sistema atual', cost: 'Gr√°tis', effect: { community: -12 }, feedback: 'Falhas nas previs√µes causaram preju√≠zos.', type: 'negative' }
                ]
            }
        ];

        let gameState = {
            playerName: '',
            year: 1,
            budget: 100,
            community: 100,
            seaLevel: 30,
            usedSituations: [],
            livesSaved: 0,
            livesLost: 0
        };

        function startGame() {
            const name = document.getElementById('playerName').value.trim();
            if (!name) {
                alert('Por favor, digite seu nome!');
                return;
            }
            
            gameState.playerName = name;
            document.getElementById('playerNameDisplay').textContent = name;
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            loadNewSituation();
        }

        function loadNewSituation() {
            // AJUSTADO: Eventos cr√≠ticos aparecem mais cedo (20% de chance geral, 40% em anos m√∫ltiplos de 3)
            const criticalChance = gameState.year % 3 === 0 ? 0.4 : 0.2;
            
            let availableSituations = situations.filter(
                (_, index) => !gameState.usedSituations.includes(index)
            );
            
            // Se acabaram situa√ß√µes, reinicia o pool
            if (availableSituations.length === 0) {
                gameState.usedSituations = [];
                availableSituations = situations;
            }
            
            // Filtrar eventos cr√≠ticos
            const criticalSituations = availableSituations.filter(s => s.critical);
            const normalSituations = availableSituations.filter(s => !s.critical);
            
            let situation;
            if (Math.random() < criticalChance && criticalSituations.length > 0) {
                situation = criticalSituations[Math.floor(Math.random() * criticalSituations.length)];
            } else {
                situation = normalSituations[Math.floor(Math.random() * normalSituations.length)];
            }
            
            const situationIndex = situations.indexOf(situation);
            gameState.usedSituations.push(situationIndex);
            
            // Destacar eventos cr√≠ticos
            const situationCard = document.getElementById('situationCard');
            const titleElement = document.getElementById('situationTitle');
            
            titleElement.textContent = situation.title;
            if (situation.critical) {
                situationCard.classList.add('critical');
                titleElement.style.color = '#e74c3c';
                titleElement.style.fontSize = '1.5rem';
            } else {
                situationCard.classList.remove('critical');
                titleElement.style.color = '#2c3e50';
                titleElement.style.fontSize = '1.3rem';
            }
            
            document.getElementById('situationLocation').textContent = 'üìç ' + getRandomCity();
            document.getElementById('situationDesc').textContent = situation.desc;
            
            const choicesContainer = document.getElementById('choicesContainer');
            choicesContainer.innerHTML = '';
            
            situation.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                
                // Calcular custo da escolha
                const costMatch = choice.cost.match(/üí∞ -(\d+)/);
                const cost = costMatch ? parseInt(costMatch[1]) : 0;
                
                // Desabilitar bot√£o se n√£o tiver or√ßamento suficiente (exceto op√ß√µes gr√°tis)
                if (cost > gameState.budget && cost > 0) {
                    btn.classList.add('disabled');
                }
                
                btn.innerHTML = `
                    <span>${choice.text}</span>
                    <span class="choice-cost">${choice.cost}</span>
                `;
                
                if (!btn.classList.contains('disabled')) {
                    btn.onclick = () => makeChoice(choice);
                }
                
                choicesContainer.appendChild(btn);
            });
            
            updateDisplay();
        }

        function makeChoice(choice) {
            // Verificar novamente se tem or√ßamento (seguran√ßa extra)
            const costMatch = choice.cost.match(/üí∞ -(\d+)/);
            const cost = costMatch ? parseInt(costMatch[1]) : 0;
            
            if (cost > gameState.budget && cost > 0) {
                showFeedback('‚ùå Or√ßamento insuficiente para esta a√ß√£o!', 'negative');
                return;
            }
            
            applyEffects(choice.effect);
            showFeedback(choice.feedback, choice.type);
            
            setTimeout(() => {
                advanceYear();
            }, 2000);
        }

        function applyEffects(effect) {
            if (effect.budget) gameState.budget += effect.budget;
            if (effect.community) gameState.community += effect.community;
            if (effect.sea) gameState.seaLevel += effect.sea;
            if (effect.lives) gameState.livesSaved += effect.lives;
            if (effect.livesLost) gameState.livesLost += effect.livesLost;
            
            gameState.budget = Math.max(0, Math.min(300, gameState.budget));
            gameState.community = Math.max(0, Math.min(200, gameState.community));
            gameState.seaLevel = Math.max(0, Math.min(100, gameState.seaLevel));
            
            updateDisplay();
        }

        function showFeedback(message, type) {
            const container = document.getElementById('feedbackContainer');
            container.innerHTML = `<div class="feedback-message ${type}">${message}</div>`;
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 3000);
        }

        function advanceYear() {
            gameState.year++;
            
            // OR√áAMENTO AUMENTADO: 18% do apoio comunit√°rio
            const budgetIncrease = Math.floor(gameState.community * 0.18);
            gameState.budget += budgetIncrease;
            gameState.budget = Math.min(300, gameState.budget);
            
            // Custo de manuten√ß√£o
            const maintenanceCost = Math.floor(gameState.year * 0.8);
            gameState.budget -= maintenanceCost;
            
            if (budgetIncrease > 0 || maintenanceCost > 0) {
                let maintenanceMsg = '';
                if (maintenanceCost > 0) {
                    maintenanceMsg = ` | Custo de manuten√ß√£o: -${maintenanceCost}`;
                }
                showFeedback(`üìà Or√ßamento +${budgetIncrease}${maintenanceMsg}`, 'neutral');
            }
            
            updateDisplay();
            
            if (checkGameOver()) {
                return;
            }
            
            setTimeout(() => {
                loadNewSituation();
            }, 1500);
        }

        function updateDisplay() {
            document.getElementById('yearDisplay').textContent = gameState.year;
            
            const budgetBar = document.getElementById('budgetBar');
            budgetBar.textContent = Math.round(gameState.budget);
            budgetBar.style.width = Math.min(100, (gameState.budget / 300) * 100) + '%';
            
            const communityBar = document.getElementById('communityBar');
            communityBar.textContent = Math.round(gameState.community) + '%';
            communityBar.style.width = Math.min(100, (gameState.community / 200) * 100) + '%';
            
            const seaBar = document.getElementById('seaBar');
            seaBar.textContent = Math.round(gameState.seaLevel) + '%';
            seaBar.style.width = gameState.seaLevel + '%';
            
            // Atualizar contador de vidas
            document.getElementById('livesSaved').textContent = gameState.livesSaved;
            document.getElementById('livesLost').textContent = gameState.livesLost;
        }

        function checkGameOver() {
            if (gameState.seaLevel >= 85) {
                endGame(false, 'O n√≠vel do mar atingiu n√≠veis cr√≠ticos! As cidades costeiras do litoral sul capixaba sofreram graves danos. Milhares de fam√≠lias foram afetadas.');
                return true;
            }
            
            if (gameState.budget <= 0 && gameState.community <= 20) {
                endGame(false, 'Sem recursos e apoio da comunidade, n√£o foi poss√≠vel continuar as a√ß√µes de prote√ß√£o costeira. Sua gest√£o terminou em fracasso.');
                return true;
            }
            
            if (gameState.year > 25) {
                if (gameState.seaLevel < 50 && gameState.community > 60) {
                    endGame(true, 'Parab√©ns! Voc√™ conseguiu gerenciar com sucesso o litoral sul capixaba durante 25 anos! As cidades costeiras est√£o protegidas e a popula√ß√£o confia em voc√™!');
                } else {
                    endGame(false, 'Sua gest√£o terminou ap√≥s 25 anos, mas os resultados n√£o foram satisfat√≥rios. O litoral precisa de mais prote√ß√£o.');
                }
                return true;
            }
            
            return false;
        }

        function endGame(victory, message) {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('gameOverScreen').classList.remove('hidden');
            
            const content = document.getElementById('gameOverContent');
            content.className = victory ? 'game-over victory' : 'game-over defeat';
            
            const netLives = gameState.livesSaved - gameState.livesLost;
            const livesText = netLives > 0 ? 
                `salvou <strong>${netLives} mil vidas</strong>` : 
                `n√£o conseguiu salvar vidas suficientes (saldo: ${netLives} mil)`;
            
            document.getElementById('gameOverTitle').textContent = victory ? 'üéâ Vit√≥ria!' : 'üòî Fim de Jogo';
            document.getElementById('gameOverMessage').innerHTML = `
                ${message}
                <br><br>
                <strong>üìä Estat√≠sticas da sua gest√£o:</strong><br>
                üë• <strong>Vidas salvas:</strong> ${gameState.livesSaved} mil pessoas<br>
                üíî <strong>Vidas perdidas:</strong> ${gameState.livesLost} mil pessoas<br>
                üìà <strong>Saldo final:</strong> Voc√™ ${livesText}<br>
                üåä <strong>N√≠vel do mar final:</strong> ${Math.round(gameState.seaLevel)}%<br>
                ü§ù <strong>Apoio comunit√°rio:</strong> ${Math.round(gameState.community)}%
                <br><br>
                <strong>üåç IMPACTOS DO AUMENTO DO N√çVEL DO MAR NO LITORAL SUL-CAPIXABA:</strong><br><br>
                
                <strong>üìç MARATA√çZES:</strong><br>
                ‚Ä¢ Cidade mais vulner√°vel √† eros√£o costeira<br>
                ‚Ä¢ Fal√©sias em risco de desmoronamento<br>
                ‚Ä¢ √Åreas tur√≠sticas amea√ßadas pelo avan√ßo do mar<br>
                ‚Ä¢ Proje√ß√£o: pode perder 40% de suas praias at√© 2050<br><br>
                
                <strong>üìç ITAIPAVA:</strong><br>
                ‚Ä¢ Manguezais cr√≠ticos para prote√ß√£o costeira<br>
                ‚Ä¢ Ecossistemas √∫nicos em risco<br>
                ‚Ä¢ Agricultura costeira amea√ßada pela saliniza√ß√£o<br>
                ‚Ä¢ Comunidades pesqueiras vulner√°veis<br><br>
                
                <strong>üìç PRESIDENTE KENNEDY:</strong><br>
                ‚Ä¢ √Åreas baixas propensas a inunda√ß√µes<br>
                ‚Ä¢ Infraestrutura portu√°ria em risco<br>
                ‚Ä¢ Solo agr√≠cola amea√ßado pela √°gua salgada<br>
                ‚Ä¢ Necessidade urgente de prote√ß√£o costeira<br><br>
                
                <strong>üî¨ CONSEQU√äNCIAS REAIS:</strong><br>
                ‚Ä¢ <strong>Eros√£o Costeira:</strong> Perda de 2-3 metros de faixa de areia por ano<br>
                ‚Ä¢ <strong>Inunda√ß√µes Permanentes:</strong> √Åreas baixas podem ser submersas com eleva√ß√£o de 1m<br>
                ‚Ä¢ <strong>Saliniza√ß√£o:</strong> Contamina√ß√£o de len√ß√≥is fre√°ticos e solos agr√≠colas<br>
                ‚Ä¢ <strong>Destrui√ß√£o de Ecossistemas:</strong> Manguezais e restingas s√£o barreiras naturais vitais<br>
                ‚Ä¢ <strong>Impacto Econ√¥mico:</strong> Turismo, pesca e com√©rcio local severamente afetados<br>
                ‚Ä¢ <strong>Deslocamento Populacional:</strong> Milhares de fam√≠lias podem precisar ser realocadas<br><br>
                
                <strong>üõ°Ô∏è A√á√ïES DE PREVEN√á√ÉO RECOMENDADAS:</strong><br>
                ‚Ä¢ Restaura√ß√£o de manguezais e restingas<br>
                ‚Ä¢ Constru√ß√£o de quebra-mares sustent√°veis<br>
                ‚Ä¢ Zoneamento costeiro inteligente<br>
                ‚Ä¢ Sistemas de alerta precoce para eventos extremos<br>
                ‚Ä¢ Educa√ß√£o ambiental das comunidades locais<br><br>
                
                <em>Proje√ß√µes cient√≠ficas indicam que, sem a√ß√µes efetivas, o litoral capixaba pode perder 30-40% de suas praias atuais at√© 2050.</em>
            `;
        }

        // Event Listeners
        document.getElementById('startBtn').addEventListener('click', startGame);
        
        document.getElementById('playerName').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                startGame();
            }
        });
    </script>
</body>
</html>
